<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FeiCoin Âå∫ÂùóÈìæÊµèËßàÂô®</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            width: 95%;
            margin: 0 auto;
            background: transparent;
            border-radius: 0;
            box-shadow: none;
            overflow: visible;
        }

        .header {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 15px;
            margin: 20px;
            margin-bottom: 0;
        }

        .header h1 {
            font-size: 1.8em;
            margin-bottom: 6px;
        }

        .header p {
            font-size: 1em;
            opacity: 0.9;
        }

        .main-content {
            padding: 20px;
            display: grid !important;
            grid-template-columns: 1fr 350px !important;
            gap: 20px;
            min-height: calc(100vh - 200px);
            align-items: start;
            width: 100%;
        }
        
        .tab-operations-panel {
            display: flex;
            flex-direction: column;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            min-height: calc(100vh - 200px);
            grid-column: 1;
        }
        
        .logs-panel {
            display: flex !important;
            flex-direction: column;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            position: sticky;
            top: 20px;
            height: calc(100vh - 200px);
            min-height: 500px;
            grid-column: 2;
            width: 350px;
        }

        .section {
            margin-bottom: 25px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 18px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        .logs-panel .section {
            margin-bottom: 0;
            border-radius: 0;
            flex: 1;
            display: flex;
            flex-direction: column;
            background: transparent;
            box-shadow: none;
        }

        .section h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5em;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 8px;
        }


        .transfer-form {
            background: white;
            padding: 15px;
            border-radius: 6px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 12px;
        }
        
        .form-row {
            display: flex;
            margin-bottom: 12px;
        }
        
        .form-row .form-group {
            margin-bottom: 0;
        }

        .form-group label {
            display: block;
            margin-bottom: 4px;
            font-weight: 600;
            color: #333;
            font-size: 0.9em;
        }

        .form-group select,
        .form-group input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .logs {
            background: #1e1e1e;
            color: #00ff00;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            flex: 1;
            overflow-y: auto;
            border: 2px solid #333;
            min-height: 300px;
        }

        .log-entry {
            margin-bottom: 5px;
            padding: 5px 0;
            border-bottom: 1px solid #333;
        }

        .log-timestamp {
            color: #888;
            margin-right: 10px;
        }

        .log-level-info { color: #00ff00; }
        .log-level-error { color: #ff0000; }
        .log-level-warning { color: #ffff00; }
        .log-level-transfer { color: #00bfff; }
        .log-level-success { color: #32cd32; }
        
        .transfer-separator {
            border: none;
            border-top: 2px solid #444;
            margin: 15px 0;
            background: linear-gradient(90deg, transparent 0%, #00bfff 20%, #00bfff 80%, transparent 100%);
            height: 2px;
            position: relative;
        }
        
        .transfer-separator::before {
            content: 'üí∏ ËΩ¨Ë¥¶ÊµÅÁ®ã üí∏';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: #1e1e1e;
            color: #00bfff;
            padding: 0 10px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .transfer-end-separator {
            border: none;
            border-top: 2px solid #444;
            margin: 15px 0;
            background: linear-gradient(90deg, transparent 0%, #32cd32 20%, #32cd32 80%, transparent 100%);
            height: 2px;
            position: relative;
        }
        
        .transfer-end-separator::before {
            content: '‚úÖ ËΩ¨Ë¥¶ÂÆåÊàê ‚úÖ';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: #1e1e1e;
            color: #32cd32;
            padding: 0 10px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .transfer-log {
            background: rgba(0, 191, 255, 0.1);
            border-left: 3px solid #00bfff;
            padding-left: 10px;
            margin: 2px 0;
        }
        
        .success-log {
            background: rgba(50, 205, 50, 0.15);
            border-left: 3px solid #32cd32;
            padding-left: 10px;
            margin: 2px 0;
        }

        .status {
            padding: 10px 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: 600;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status.loading {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .blockchain-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }

        .info-card {
            background: white;
            padding: 12px;
            border-radius: 6px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            text-align: center;
            border-top: 3px solid #4CAF50;
        }

        .info-card h4 {
            color: #666;
            font-size: 0.8em;
            margin-bottom: 6px;
            text-transform: uppercase;
        }

        .info-card .value {
            font-size: 1.2em;
            font-weight: bold;
            color: #4CAF50;
        }

        /* Èí±ÂåÖÁÆ°ÁêÜÊ†∑Âºè */
        .wallet-management,
        .validator-management {
            margin-top: 20px;
        }
        
        .wallet-actions,
        .validator-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .wallet-form,
        .validator-form {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            margin: 20px 0;
            border-left: 4px solid #2196F3;
        }
        
        .wallet-form h3,
        .validator-form h3 {
            color: #2196F3;
            margin-bottom: 15px;
        }
        
        .wallet-form textarea,
        .validator-form textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: monospace;
            resize: vertical;
        }
        
        .wallet-list,
        .validator-list {
            margin-top: 20px;
        }
        
        .wallet-item,
        .validator-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin: 10px 0;
            border-left: 4px solid #4CAF50;
        }
        
        .wallet-item h4,
        .validator-item h4 {
            color: #4CAF50;
            margin-bottom: 10px;
        }
        
        .wallet-address,
        .validator-address {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #666;
            background: #f5f5f5;
            padding: 5px 8px;
            border-radius: 4px;
            margin: 5px 0;
            word-break: break-all;
        }
        
        .wallet-balance {
            margin: 8px 0;
            padding: 8px 12px;
            background: #e8f5e8;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
        }
        
        .validator-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .validator-status.bonded {
            background: #d4edda;
            color: #155724;
        }
        
        .validator-status.unbonded {
            background: #f8d7da;
            color: #721c24;
        }
        
        .validator-tokens {
            font-weight: bold;
            color: #2196F3;
        }
        
        .mnemonic-display {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            word-break: break-all;
        }
        
        .mnemonic-warning {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 6px;
            padding: 10px;
            margin: 10px 0;
            color: #721c24;
            font-weight: bold;
        }
        
        /* Èí±ÂåÖÁÆÄ‰ªãÊ®°ÂºèÊ†∑Âºè */
        .wallet-item-compact {
            background: white;
            padding: 8px 12px;
            border-radius: 6px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            margin: 6px;
            border-left: 3px solid #4CAF50;
            display: block;
            min-width: 180px;
            flex: 1;
        }
        
        .wallets-container-horizontal {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
        
        .wallet-compact-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .wallet-compact-info {
            flex: 1;
        }
        
        .wallet-compact-name {
            font-weight: bold;
            color: #4CAF50;
            margin-bottom: 2px;
            font-size: 0.9em;
        }
        
        .wallet-compact-balance {
            font-size: 0.8em;
            color: #666;
            font-family: 'Courier New', monospace;
            margin-bottom: 4px;
        }
        
        .wallet-compact-actions {
            display: flex;
            gap: 4px;
            align-items: center;
            flex-shrink: 0;
        }
        
        .wallet-compact-actions-mini {
            display: flex;
            gap: 4px;
            justify-content: center;
            margin-top: 6px;
        }
        
        .btn-small {
            padding: 4px 8px;
            font-size: 0.75em;
            border-radius: 3px;
        }
        
        .btn-mini {
            padding: 3px 6px;
            font-size: 0.7em;
            border-radius: 3px;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-mini:hover {
            transform: scale(1.05);
        }
        
        .wallet-details {
            margin-top: 12px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #e9ecef;
            display: none;
        }
        
        .wallet-details.expanded {
            display: block;
        }
        
        .wallet-details .wallet-address {
            font-family: 'Courier New', monospace;
            font-size: 11px;
            color: #666;
            background: #fff;
            padding: 8px;
            border-radius: 4px;
            margin: 8px 0;
            word-break: break-all;
            border: 1px solid #ddd;
        }
        
        .expand-btn {
            background: none;
            border: none;
            color: #007bff;
            cursor: pointer;
            font-size: 0.85em;
            text-decoration: underline;
            padding: 2px 4px;
            white-space: nowrap;
        }
        
        .expand-btn:hover {
            color: #0056b3;
        }
        
        /* Â•ñÂä±ÁÆ°ÁêÜÊ†∑Âºè */
        .rewards-management {
            margin-top: 20px;
        }
        
        .rewards-container {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin: 15px 0;
            border-left: 4px solid #FF9800;
        }
        
        .rewards-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .rewards-header h3 {
            color: #FF9800;
            margin: 0;
            font-size: 1.1em;
        }
        
        .reward-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #fff3e0;
            border-radius: 6px;
            margin: 8px 0;
            border: 1px solid #ffcc02;
        }
        
        .reward-info {
            flex: 1;
        }
        
        .reward-amount {
            font-weight: bold;
            color: #FF9800;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
        }
        
        .reward-validator {
            font-size: 0.9em;
            color: #666;
            margin-top: 4px;
        }
        
        .reward-actions {
            display: flex;
            gap: 8px;
        }
        
        .btn-reward {
            background: linear-gradient(45deg, #FF9800, #F57C00);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-reward:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
        }
        
        .btn-reward:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .total-rewards {
            background: #e8f5e8;
            padding: 12px;
            border-radius: 6px;
            border: 2px solid #4CAF50;
            text-align: center;
            margin: 10px 0;
        }
        
        .total-rewards .amount {
            font-size: 1.3em;
            font-weight: bold;
            color: #4CAF50;
            font-family: 'Courier New', monospace;
        }
        
        /* TokenÂàÜÂ∏ÉË°®Ê†∑Âºè */
        .token-distribution-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        .token-distribution-table th,
        .token-distribution-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .token-distribution-table th {
            background: #f8f9fa;
            font-weight: bold;
            color: #333;
        }
        
        .token-distribution-table .address-cell {
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            max-width: 150px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .token-distribution-table .amount-cell {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #4CAF50;
        }
        
        .token-distribution-table .percentage-cell {
            color: #666;
            font-size: 0.9em;
        }
        
        .token-distribution-table tr:hover {
            background: #f5f5f5;
        }
        
        /* TabÈ°µÈù¢Ê†∑Âºè */
        .tab-container {
            width: 100%;
            margin: 0;
            height: 100%;
            display: flex;
            flex-direction: column;
            flex: 1;
        }
        
        .tab-header {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #ddd;
            overflow-x: auto;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        .tab-button {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        .tab-button:hover {
            background: #e9ecef;
            color: #333;
        }
        
        .tab-button.active {
            color: #4CAF50;
            border-bottom-color: #4CAF50;
            background: white;
        }
        
        .tab-content {
            background: white;
            padding: 0;
            border-radius: 0 0 8px 8px;
            flex: 1;
            overflow-y: auto;
            max-height: calc(100vh - 200px);
        }
        
        .tab-panel {
            display: none;
            padding: 20px;
            animation: fadeIn 0.3s ease-in;
        }
        
        .tab-panel.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ÂìçÂ∫îÂºèTab */
        @media (max-width: 768px) {
            .tab-button {
                padding: 12px 15px;
                font-size: 0.9em;
            }
            
            .tab-header {
                border-radius: 0;
            }
        }
        
        
        /* TokenÂ¢ûÂèëË°®ÂçïÊ†∑Âºè */
        .mint-form-divider {
            margin: 15px 0;
            padding: 8px 0;
            border-top: 1px dashed #ddd;
            color: #666;
            font-size: 0.9em;
            text-align: center;
        }
        
        .form-group.custom-input {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
            border: 1px dashed #ccc;
        }
        
        .form-group.custom-input label {
            color: #666;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }
            
            .main-content {
                padding: 10px;
                grid-template-columns: 1fr !important;
                grid-template-rows: 1fr auto;
                gap: 10px;
            }
            
            .container {
                width: 100%;
                margin: 0;
            }
            
            .logs-panel {
                position: relative;
                top: 0;
                max-height: 300px;
            }
            
            .tab-content {
                max-height: 60vh;
            }
            
            .tab-operations-panel,
            .logs-panel {
                min-height: auto;
            }
            
            .wallet-actions,
            .validator-actions {
                flex-direction: column;
            }
            
            .tab-button {
                padding: 12px 15px;
                font-size: 0.9em;
            }
            
            .tab-header {
                border-radius: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ FeiCoin Âå∫ÂùóÈìæÊµèËßàÂô®</h1>
            <p>ÁúüÂÆûÂå∫ÂùóÈìæÊµèËßàÂô® - ËøûÊé• FeiCoin ÁΩëÁªúÔºåÊâßË°åÁúüÂÆûËΩ¨Ë¥¶‰∫§Êòì</p>
        </div>

        <div class="main-content">
            <!-- Â∑¶‰æßÔºöTabÈ°µÈù¢ÂÆπÂô® -->
            <div class="tab-operations-panel">
                <div class="tab-container">
                    <!-- Tab Â§¥ÈÉ® -->
                    <div class="tab-header">
                        <button class="tab-button active" onclick="switchTab('blockchain')">‚õìÔ∏è Âå∫ÂùóÈìæÁä∂ÊÄÅ</button>
                        <button class="tab-button" onclick="switchTab('token')">ü™ô TokenÁÆ°ÁêÜ</button>
                        <button class="tab-button" onclick="switchTab('wallet')">üí∏ ËΩ¨Ë¥¶&Èí±ÂåÖ</button>
                        <button class="tab-button" onclick="switchTab('validator')">üèõÔ∏è È™åËØÅËÄÖ&Ë¥®Êäº</button>
                    </div>
                
                <!-- Tab ÂÜÖÂÆπ -->
                <div class="tab-content">
                    <!-- Âå∫ÂùóÈìæÁä∂ÊÄÅÈ°µ -->
                    <div class="tab-panel active" id="tab-blockchain">
                        <div class="section">
                            <h2>‚õìÔ∏è Âå∫ÂùóÈìæÁä∂ÊÄÅ</h2>
                            
                            <!-- Âü∫Á°ÄÁΩëÁªú‰ø°ÊÅØ -->
                            <div style="margin-bottom: 20px;">
                                <h3 style="color: #4CAF50; margin-bottom: 10px;">üåê ÁΩëÁªúÂü∫Á°Ä‰ø°ÊÅØ</h3>
                                <div class="blockchain-info">
                                    <div class="info-card">
                                        <h4>ÂΩìÂâçÈ´òÂ∫¶</h4>
                                        <div class="value" id="block-height">-</div>
                                    </div>
                                    <div class="info-card">
                                        <h4>ÁΩëÁªúID</h4>
                                        <div class="value" id="chain-id">-</div>
                                    </div>
                                    <div class="info-card">
                                        <h4>ÊúÄÊñ∞Âå∫ÂùóÊó∂Èó¥</h4>
                                        <div class="value" id="block-time" style="font-size: 0.9em;">-</div>
                                    </div>
                                    <div class="info-card">
                                        <h4>Âå∫ÂùóÈó¥Èöî</h4>
                                        <div class="value" id="block-interval">-</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- È™åËØÅËÄÖ‰∏éË¥®Êäº‰ø°ÊÅØ -->
                            <div style="margin-bottom: 20px;">
                                <h3 style="color: #4CAF50; margin-bottom: 10px;">üèõÔ∏è È™åËØÅËÄÖ‰∏éË¥®Êäº</h3>
                                <div class="blockchain-info">
                                    <div class="info-card">
                                        <h4>È™åËØÅËÄÖÊï∞Èáè</h4>
                                        <div class="value" id="validator-count">-</div>
                                    </div>
                                    <div class="info-card">
                                        <h4>Ê¥ªË∑ÉÈ™åËØÅËÄÖ</h4>
                                        <div class="value" id="active-validators">-</div>
                                    </div>
                                    <div class="info-card">
                                        <h4>ÊÄªË¥®ÊäºÈáè</h4>
                                        <div class="value" id="total-bonded">-</div>
                                    </div>
                                    <div class="info-card">
                                        <h4>Ë¥®ÊäºÁéá</h4>
                                        <div class="value" id="bonded-ratio">-</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ÁΩëÁªúÊ≤ªÁêÜ‰ø°ÊÅØ -->
                            <div style="margin-bottom: 20px;">
                                <h3 style="color: #4CAF50; margin-bottom: 10px;">üó≥Ô∏è Ê≤ªÁêÜ‰ø°ÊÅØ</h3>
                                <div class="blockchain-info">
                                    <div class="info-card">
                                        <h4>ÊèêÊ°àÊÄªÊï∞</h4>
                                        <div class="value" id="total-proposals">-</div>
                                    </div>
                                    <div class="info-card">
                                        <h4>Ê¥ªË∑ÉÊèêÊ°à</h4>
                                        <div class="value" id="active-proposals">-</div>
                                    </div>
                                    <div class="info-card">
                                        <h4>Á§æÂå∫Ê±†</h4>
                                        <div class="value" id="community-pool">-</div>
                                    </div>
                                    <div class="info-card">
                                        <h4>ÈÄöËÉÄÁéá</h4>
                                        <div class="value" id="inflation-rate">-</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ÊúÄÊñ∞Âå∫ÂùóËØ¶ÊÉÖ -->
                            <div style="margin-bottom: 20px;">
                                <h3 style="color: #4CAF50; margin-bottom: 10px;">üì¶ ÊúÄÊñ∞Âå∫ÂùóËØ¶ÊÉÖ</h3>
                                <div class="blockchain-info">
                                    <div class="info-card">
                                        <h4>Âå∫ÂùóÂìàÂ∏å</h4>
                                        <div class="value" id="block-hash" style="font-size: 0.8em; font-family: monospace;">-</div>
                                    </div>
                                    <div class="info-card">
                                        <h4>‰∫§ÊòìÊï∞Èáè</h4>
                                        <div class="value" id="tx-count">-</div>
                                    </div>
                                    <div class="info-card">
                                        <h4>Âå∫ÂùóÂ§ßÂ∞è</h4>
                                        <div class="value" id="block-size">-</div>
                                    </div>
                                    <div class="info-card">
                                        <h4>Âá∫ÂùóÈ™åËØÅËÄÖ</h4>
                                        <div class="value" id="proposer" style="font-size: 0.9em;">-</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ÂÆûÊó∂Êï∞ÊçÆÂà∑Êñ∞ÊåâÈíÆ -->
                            <div style="text-align: center; margin-top: 20px;">
                                <button class="btn" onclick="refreshAllBlockchainData()" id="refresh-blockchain-btn">üîÑ Âà∑Êñ∞ÊâÄÊúâÊï∞ÊçÆ</button>
                                <button class="btn" onclick="toggleRealTimeUpdate()" id="realtime-btn" style="background: #17a2b8;">‚ö° ÂÆûÊó∂Êõ¥Êñ∞: ÂºÄÂêØ</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- TokenÁÆ°ÁêÜÈ°µ -->
                    <div class="tab-panel" id="tab-token">
                        <div class="section">
                            <h2>ü™ô Token ÁÆ°ÁêÜ</h2>
                            
                            <!-- TokenÁªüËÆ° -->
                            <div style="margin-bottom: 20px; background: #e8f5e8; padding: 15px; border-radius: 8px;">
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                    <div class="info-card">
                                        <h4>TokenÊÄª‰æõÂ∫îÈáè</h4>
                                        <div class="value" id="token-total-supply">Âä†ËΩΩ‰∏≠...</div>
                                    </div>
                                    <div class="info-card">
                                        <h4>TokenÊµÅÈÄöÈáè</h4>
                                        <div class="value" id="token-circulation">Âä†ËΩΩ‰∏≠...</div>
                                    </div>
                                    <div class="info-card">
                                        <h4>ÊåÅÊúâÂú∞ÂùÄÊï∞</h4>
                                        <div class="value" id="token-holders">Âä†ËΩΩ‰∏≠...</div>
                                    </div>
                                </div>
                                <div style="margin-top: 15px; text-align: center;">
                                    <button class="btn" onclick="showMintTokenForm()">üî® Ê®°ÊãüÂ¢ûÂèë (ËΩ¨Ë¥¶)</button>
                                    <button class="btn" onclick="showRealMintInfo()" style="background: #6c757d;" disabled title="FeiCoin‰∏çÊîØÊåÅÁúüÂÆûÂ¢ûÂèë">üíé ÁúüÂÆûÂ¢ûÂèë (‰∏çÊîØÊåÅ)</button>
                                    <button class="btn" onclick="showRealMintInfo()" style="background: #17a2b8;">‚ÑπÔ∏è ÊäÄÊúØËØ¥Êòé</button>
                                    <button class="btn" onclick="refreshTokenStats()">üîÑ Âà∑Êñ∞ÁªüËÆ°</button>
                                    <button class="btn" onclick="showTokenDistribution()">üìä Êü•ÁúãÂàÜÂ∏É</button>
                                </div>
                            </div>
                            
                            <!-- TokenÂ¢ûÂèëË°®Âçï -->
                            <div id="mint-token-form" class="wallet-form" style="display: none; border-left: 4px solid #FF9800;">
                                <h3>üî® Ê®°ÊãüÂ¢ûÂèëToken (ÁÆ°ÁêÜÂëòËΩ¨Ë¥¶)</h3>
                                <div style="background: #fff3cd; padding: 8px; border-radius: 4px; margin-bottom: 15px; font-size: 0.9em; color: #856404;">
                                    ‚ö†Ô∏è Ê≥®ÊÑèÔºöËøôÊòØÊ®°ÊãüÂ¢ûÂèëÂäüËÉΩÔºåÂÆûÈôÖÊòØ‰ªéÁÆ°ÁêÜÂëòË¥¶Êà∑ËΩ¨Ë¥¶Âà∞Êé•Êî∂Âú∞ÂùÄ„ÄÇÁúüÊ≠£ÁöÑÂ¢ûÂèëÈúÄË¶ÅÂå∫ÂùóÈìæÊ®°ÂùóÁ∫ßÂà´ÁöÑmintÊùÉÈôê„ÄÇ
                                </div>
                                <div class="form-group">
                                    <label for="mint-from-account">ÁÆ°ÁêÜÂëòË¥¶Êà∑:</label>
                                    <select id="mint-from-account">
                                        <option value="">ÈÄâÊã©Ë¥¶Êà∑</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="mint-to-account">Êé•Êî∂Âú∞ÂùÄ:</label>
                                    <select id="mint-to-account">
                                        <option value="">ÈÄâÊã©Êé•Êî∂Ë¥¶Êà∑</option>
                                    </select>
                                </div>
                                <div class="mint-form-divider">Êàñ</div>
                                <div class="form-group custom-input">
                                    <label for="mint-to-custom">Ëá™ÂÆö‰πâÊé•Êî∂Âú∞ÂùÄ:</label>
                                    <input type="text" id="mint-to-custom" placeholder="ËæìÂÖ•Êé•Êî∂Âú∞ÂùÄ (feic1...)">
                                </div>
                                <div class="form-group">
                                    <label for="mint-amount">Â¢ûÂèëÊï∞Èáè:</label>
                                    <input type="number" id="mint-amount" placeholder="ËæìÂÖ•Â¢ûÂèëÊï∞Èáè" min="1">
                                </div>
                                <div class="form-group">
                                    <label for="mint-denom">‰ª£Â∏ÅÁ±ªÂûã:</label>
                                    <select id="mint-denom">
                                        <option value="token">token</option>
                                        <option value="stake">stake</option>
                                    </select>
                                </div>
                                <button class="btn" id="mint-btn" onclick="mintTokens()" style="background: linear-gradient(45deg, #FF9800, #F57C00);">üî® ÊâßË°åÂ¢ûÂèë</button>
                                <button class="btn" onclick="hideMintTokenForm()">‚ùå ÂèñÊ∂à</button>
                                <div id="mint-status"></div>
                            </div>
                            
                            <!-- TokenÂàÜÂ∏ÉË°® -->
                            <div id="token-distribution-section" class="wallet-form" style="display: none; border-left: 4px solid #2196F3;">
                                <h3>üìä Token ÂàÜÂ∏ÉÁªüËÆ°</h3>
                                <div style="margin-bottom: 15px;">
                                    <select id="distribution-token-type" onchange="refreshTokenDistribution()">
                                        <option value="token">Token</option>
                                        <option value="stake">Stake</option>
                                    </select>
                                    <button class="btn-mini" onclick="refreshTokenDistribution()">üîÑ</button>
                                </div>
                                <div id="token-distribution-list">
                                    Âä†ËΩΩ‰∏≠...
                                </div>
                                <button class="btn" onclick="hideTokenDistribution()">‚ùå ÂÖ≥Èó≠</button>
                            </div>
                            
                            <!-- ÁúüÂÆûÂ¢ûÂèëËØ¥Êòé -->
                            <div id="real-mint-info" class="wallet-form" style="display: none; border-left: 4px solid #17a2b8;">
                                <h3>‚ÑπÔ∏è ÁúüÂÆûTokenÂ¢ûÂèëËØ¥Êòé</h3>
                                <div style="line-height: 1.6; color: #333;">
                                    <h4>üîê ÁúüÂÆûÂ¢ûÂèëÈúÄË¶ÅÁöÑÊù°‰ª∂Ôºö</h4>
                                    <ul style="margin: 10px 0; padding-left: 20px;">
                                        <li><strong>Ê®°ÂùóÊùÉÈôê</strong>ÔºöÈúÄË¶ÅbankÊ®°ÂùóÁöÑmintÊùÉÈôê</li>
                                        <li><strong>Ê≤ªÁêÜÊèêÊ°à</strong>ÔºöÈÄöËøáÈìæ‰∏äÊ≤ªÁêÜÊäïÁ•®ÂÜ≥ÂÆö</li>
                                        <li><strong>Â§öÈáçÁ≠æÂêç</strong>ÔºöÂ§ö‰∏™È™åËØÅËÄÖÂÖ±ÂêåÁ≠æÁΩ≤</li>
                                        <li><strong>È¢ÑËÆæËßÑÂàô</strong>ÔºöÊåâÁÖßÈ¢ÑÂÆöÁöÑÈÄöËÉÄÊú∫Âà∂</li>
                                    </ul>
                                    
                                    <h4>üí° ÁúüÂÆûÂ¢ûÂèëÁöÑÂëΩ‰ª§Á§∫‰æãÔºö</h4>
                                    <div style="background: #f8f9fa; padding: 10px; border-radius: 4px; font-family: monospace; margin: 10px 0;">
                                        # Â¶ÇÊûúÊúâmintÊùÉÈôêÔºåÂëΩ‰ª§Â¶Ç‰∏ãÔºö<br>
                                        feicoind tx bank mint [Âú∞ÂùÄ] [Êï∞Èáè][‰ª£Â∏Å] --from [ÁÆ°ÁêÜÂëò] --chain-id feicoin
                                    </div>
                                    
                                    <h4>‚ùå ÂΩìÂâçFeiCoinÈôêÂà∂Ôºö</h4>
                                    <div style="background: #f8d7da; padding: 10px; border-radius: 4px; margin: 10px 0; border: 1px solid #f5c6cb;">
                                        <strong>ÁªèËøáÊµãËØïÁ°ÆËÆ§ÔºåFeiCoin‰∏çÊîØÊåÅÁúüÂÆûTokenÂ¢ûÂèëÔºö</strong>
                                        <ul style="margin: 5px 0; padding-left: 20px;">
                                            <li><span style="color: #721c24;">‚úó</span> ‰∏çÊîØÊåÅÊ†áÂáÜÁöÑ <code>/cosmos.bank.v1beta1.MsgMint</code> Ê∂àÊÅØ</li>
                                            <li><span style="color: #721c24;">‚úó</span> Ê≤ªÁêÜÊèêÊ°àÊó†Ê≥ïÊâßË°åmintÊìç‰Ωú</li>
                                            <li><span style="color: #721c24;">‚úó</span> Ê≤°ÊúâËá™ÂÆö‰πâÁöÑÂ¢ûÂèëÊ®°Âùó</li>
                                            <li><span style="color: #155724;">‚úì</span> Âè™ËÉΩÈÄöËøáËΩ¨Ë¥¶Ê®°ÊãüÂ¢ûÂèëÔºàÊé®ËçêÔºâ</li>
                                        </ul>
                                        <div style="margin-top: 8px; padding: 8px; background: #d1ecf1; border: 1px solid #bee5eb; border-radius: 4px;">
                                            <strong>Êé®ËçêÊñπÊ°àÔºö</strong>‰ΩøÁî®"Ê®°ÊãüÂ¢ûÂèë"ÂäüËÉΩÔºåÂÆÉÂÆûÈôÖË∞ÉÁî®Âå∫ÂùóÈìæËΩ¨Ë¥¶ÂëΩ‰ª§ÔºåÊïàÊûúÁ≠âÂêå‰∫é‰ªéÂÇ®Â§áË¥¶Êà∑ÂàÜÂèë‰ª£Â∏Å„ÄÇ
                                        </div>
                                    </div>
                                    
                                    <h4>üîß Â¶Ç‰ΩïÂºÄÂêØÁúüÂÆûÂ¢ûÂèëÔºö</h4>
                                    <ol style="margin: 10px 0; padding-left: 20px;">
                                        <li>‰øÆÊîπÂàõ‰∏ñÊñá‰ª∂ÈÖçÁΩÆbankÊ®°ÂùóÊùÉÈôê</li>
                                        <li>ÂàõÂª∫Ëá™ÂÆö‰πâÊ®°ÂùóÂ§ÑÁêÜÂ¢ûÂèëÈÄªËæë</li>
                                        <li>ÈÄöËøáÊ≤ªÁêÜÊèêÊ°àÊéàÊùÉÁâπÂÆöÂú∞ÂùÄ</li>
                                        <li>‰ΩøÁî®Â§öÈáçÁ≠æÂêç‰øùÈöúÂÆâÂÖ®ÊÄß</li>
                                    </ol>
                                </div>
                                <button class="btn" onclick="hideRealMintInfo()">‚ùå ÂÖ≥Èó≠</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ËΩ¨Ë¥¶&Èí±ÂåÖÁÆ°ÁêÜÈ°µ -->
                    <div class="tab-panel" id="tab-wallet">
                        <div class="section">
                            <h2>üí∏ ËΩ¨Ë¥¶ & Èí±ÂåÖÁÆ°ÁêÜ</h2>
                            
                            <!-- Èí±ÂåÖ‰ΩôÈ¢ùÊòæÁ§∫ -->
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                    <h3 style="font-size: 1.1em; margin: 0; color: #333;">üí∞ Ë¥¶Êà∑‰ΩôÈ¢ù</h3>
                                    <div>
                                        <button class="btn-mini" onclick="refreshWalletList()">üîÑ</button>
                                        <button class="btn-mini" onclick="showCreateWallet()">+</button>
                                        <button class="btn-mini" onclick="showImportWallet()">üì•</button>
                                    </div>
                                </div>
                                <div class="wallets-container-horizontal" id="wallets-container">
                                    Âä†ËΩΩ‰∏≠...
                                </div>
                            </div>
                            
                            <!-- ËΩ¨Ë¥¶Ë°®Âçï -->
                            <div class="transfer-form">
                                <div class="form-row">
                                    <div class="form-group" style="flex: 1; margin-right: 10px;">
                                        <label for="from-account">‰ªéË¥¶Êà∑:</label>
                                        <select id="from-account">
                                            <option value="alice">Alice (feic1kpyhmumrt5g0veex9lhpzh3m99rptmmuz7cq8u)</option>
                                            <option value="bob">Bob (feic1kfde52eamxnnwkn2yjv9uj5xuf0amxuh70tnpw)</option>
                                        </select>
                                    </div>
                                    <div class="form-group" style="flex: 1;">
                                        <label for="to-account">Âà∞Ë¥¶Êà∑:</label>
                                        <select id="to-account">
                                            <option value="bob">Bob (feic1kfde52eamxnnwkn2yjv9uj5xuf0amxuh70tnpw)</option>
                                            <option value="alice">Alice (feic1kpyhmumrt5g0veex9lhpzh3m99rptmmuz7cq8u)</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group" style="flex: 2; margin-right: 10px;">
                                        <label for="amount">ËΩ¨Ë¥¶ÈáëÈ¢ù:</label>
                                        <input type="number" id="amount" placeholder="ËæìÂÖ•ËΩ¨Ë¥¶ÈáëÈ¢ù" min="1">
                                    </div>
                                    <div class="form-group" style="flex: 1;">
                                        <label for="denom">‰ª£Â∏ÅÁ±ªÂûã:</label>
                                        <select id="denom">
                                            <option value="token">token</option>
                                            <option value="stake">stake</option>
                                        </select>
                                    </div>
                                </div>
                                <button class="btn" onclick="sendTransfer()" id="transfer-btn">üí≥ ÂèëËµ∑ËΩ¨Ë¥¶</button>
                            </div>
                            <div id="transfer-status"></div>
                            
                            <!-- Èí±ÂåÖÂàõÂª∫/ÂØºÂÖ•Ë°®Âçï -->
                            <div id="create-wallet-form" class="wallet-form" style="display: none;">
                                <h3>ÂàõÂª∫Êñ∞Èí±ÂåÖ</h3>
                                <div class="form-group">
                                    <label for="new-wallet-name">Èí±ÂåÖÂêçÁß∞:</label>
                                    <input type="text" id="new-wallet-name" placeholder="ËæìÂÖ•Èí±ÂåÖÂêçÁß∞">
                                </div>
                                <button class="btn" onclick="createWallet()">üîë ÂàõÂª∫Èí±ÂåÖ</button>
                                <button class="btn" onclick="hideWalletForms()">‚ùå ÂèñÊ∂à</button>
                            </div>
                            
                            <div id="import-wallet-form" class="wallet-form" style="display: none;">
                                <h3>ÂØºÂÖ•Èí±ÂåÖ</h3>
                                <div class="form-group">
                                    <label for="import-wallet-name">Èí±ÂåÖÂêçÁß∞:</label>
                                    <input type="text" id="import-wallet-name" placeholder="ËæìÂÖ•Èí±ÂåÖÂêçÁß∞">
                                </div>
                                <div class="form-group">
                                    <label for="wallet-mnemonic">Âä©ËÆ∞ËØç:</label>
                                    <textarea id="wallet-mnemonic" placeholder="ËæìÂÖ•12Êàñ24‰∏™Âä©ËÆ∞ËØçÔºåÁî®Á©∫Ê†ºÂàÜÈöî" rows="3"></textarea>
                                </div>
                                <button class="btn" onclick="importWallet()">üì• ÂØºÂÖ•Èí±ÂåÖ</button>
                                <button class="btn" onclick="hideWalletForms()">‚ùå ÂèñÊ∂à</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- È™åËØÅËÄÖ&Ë¥®ÊäºÁÆ°ÁêÜÈ°µ -->
                    <div class="tab-panel" id="tab-validator">
                        <div class="section">
                            <h2>üèõÔ∏è È™åËØÅËÄÖ & Ë¥®ÊäºÁÆ°ÁêÜ</h2>
                            <div class="validator-management">
                                <div class="validator-actions">
                                    <button class="btn" onclick="refreshValidatorList()">üîÑ Âà∑Êñ∞È™åËØÅËÄÖ</button>
                                    <button class="btn" onclick="showCreateValidator()">‚ûï ÂàõÂª∫È™åËØÅËÄÖ</button>
                                    <button class="btn" onclick="showDelegateForm()">ü§ù ÂßîÊâòË¥®Êäº</button>
                                </div>
                                
                                <!-- ÂàõÂª∫È™åËØÅËÄÖË°®Âçï -->
                                <div id="create-validator-form" class="validator-form" style="display: none;">
                                    <h3>ÂàõÂª∫È™åËØÅËÄÖ</h3>
                                    <div class="form-group">
                                        <label for="validator-account">Ë¥¶Êà∑:</label>
                                        <select id="validator-account">
                                            <option value="">ÈÄâÊã©Ë¥¶Êà∑</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="validator-amount">Ë¥®ÊäºÈáëÈ¢ù:</label>
                                        <input type="number" id="validator-amount" placeholder="Ë¥®ÊäºÈáëÈ¢ù" min="1000000">
                                    </div>
                                    <div class="form-group">
                                        <label for="validator-moniker">È™åËØÅËÄÖÂêçÁß∞:</label>
                                        <input type="text" id="validator-moniker" placeholder="È™åËØÅËÄÖÊòæÁ§∫ÂêçÁß∞">
                                    </div>
                                    <div class="form-group">
                                        <label for="validator-commission">‰Ω£ÈáëÁéá (%):</label>
                                        <input type="number" id="validator-commission" placeholder="10" min="0" max="100" step="0.01">
                                    </div>
                                    <button class="btn" onclick="createValidator()">‚ö° ÂàõÂª∫È™åËØÅËÄÖ</button>
                                    <button class="btn" onclick="hideValidatorForms()">‚ùå ÂèñÊ∂à</button>
                                </div>
                                
                                <!-- ÂßîÊâòË°®Âçï -->
                                <div id="delegate-form" class="validator-form" style="display: none;">
                                    <h3>ÂßîÊâòË¥®Êäº</h3>
                                    <div class="form-group">
                                        <label for="delegate-account">Ë¥¶Êà∑:</label>
                                        <select id="delegate-account">
                                            <option value="">ÈÄâÊã©Ë¥¶Êà∑</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="delegate-validator">È™åËØÅËÄÖ:</label>
                                        <select id="delegate-validator">
                                            <option value="">ÈÄâÊã©È™åËØÅËÄÖ</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="delegate-amount">ÂßîÊâòÈáëÈ¢ù:</label>
                                        <input type="number" id="delegate-amount" placeholder="ÂßîÊâòÈáëÈ¢ù" min="1">
                                    </div>
                                    <button class="btn" onclick="delegateStake()">ü§ù ÂßîÊâòË¥®Êäº</button>
                                    <button class="btn" onclick="hideValidatorForms()">‚ùå ÂèñÊ∂à</button>
                                </div>
                                
                                <!-- È™åËØÅËÄÖÂàóË°® -->
                                <div class="validator-list" id="validator-list">
                                    <h3>È™åËØÅËÄÖÂàóË°®</h3>
                                    <div id="validators-container">Âä†ËΩΩ‰∏≠...</div>
                                </div>
                                
                                <!-- Â•ñÂä±ÁÆ°ÁêÜ -->
                                <div class="rewards-management">
                                    <div class="rewards-container">
                                        <div class="rewards-header">
                                            <h3>üèÜ Â•ñÂä±ÁÆ°ÁêÜ</h3>
                                            <button class="btn-mini" onclick="refreshRewards()" title="Âà∑Êñ∞Â•ñÂä±">üîÑ</button>
                                        </div>
                                        
                                        <!-- ÊÄªÂ•ñÂä±ÁªüËÆ° -->
                                        <div class="total-rewards" id="total-rewards">
                                            <div>ÊÄªËÆ°Êú™ÊèêÂèñÂ•ñÂä±</div>
                                            <div class="amount" id="total-reward-amount">Âä†ËΩΩ‰∏≠...</div>
                                        </div>
                                        
                                        <!-- Â•ñÂä±ËØ¶ÊÉÖÂàóË°® -->
                                        <div id="rewards-list">
                                            Âä†ËΩΩ‰∏≠...
                                        </div>
                                        
                                        <!-- ÊâπÈáèÊìç‰Ωú -->
                                        <div style="text-align: center; margin-top: 15px;">
                                            <button class="btn-reward" onclick="withdrawAllRewards()" id="withdraw-all-btn">
                                                üí∞ ÊèêÂèñÊâÄÊúâÂ•ñÂä±
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>

            <!-- Âè≥‰æßÔºöÊó•ÂøóÈù¢Êùø -->
            <div class="logs-panel">
                <div class="section">
                    <h2>üìã Âå∫ÂùóÈìæÊâßË°åÊó•Âøó</h2>
                    <div style="margin-bottom: 15px;">
                        <button class="btn" onclick="clearLogs()">üóëÔ∏è Ê∏ÖÈô§Êó•Âøó</button>
                        <button class="btn" onclick="toggleAutoRefresh()">
                            <span id="auto-refresh-text">‚è∏Ô∏è ÂÅúÊ≠¢Ëá™Âä®Âà∑Êñ∞</span>
                        </button>
                    </div>
                    <div class="logs" id="blockchain-logs">
                        <div class="log-entry">
                            <span class="log-timestamp">[Á≥ªÁªüÂêØÂä®]</span>
                            <span class="log-level-info">[INFO]</span> üéØ Âå∫ÂùóÈìæÊµèËßàÂô®Â∑≤Âä†ËΩΩÔºåÁ≠âÂæÖËøûÊé•Âå∫ÂùóÈìæÁΩëÁªú...
                        </div>
                        <div class="log-entry" style="color: #666; font-style: italic;">
                            <span class="log-timestamp">[‰ΩøÁî®ÊèêÁ§∫]</span>
                            üí° ËΩ¨Ë¥¶Êó•ÂøóÂ∞Ü‰ª•ËìùËâ≤È´ò‰∫ÆÊòæÁ§∫ÔºåÊàêÂäüÊìç‰Ωú‰ª•ÁªøËâ≤ÊòæÁ§∫
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ë¥¶Êà∑Âú∞ÂùÄÊò†Â∞Ñ (Âä®ÊÄÅÊõ¥Êñ∞)
        let accounts = {
            alice: 'feic1kpyhmumrt5g0veex9lhpzh3m99rptmmuz7cq8u',
            bob: 'feic1kfde52eamxnnwkn2yjv9uj5xuf0amxuh70tnpw'
        };
        
        let allWallets = [];
        let allValidators = [];

        // Ëé∑ÂèñË¥¶Êà∑Âú∞ÂùÄÁöÑÈÄöÁî®ÂáΩÊï∞
        function getAccountAddress(accountName) {
            // È¶ñÂÖàÊ£ÄÊü•ÈùôÊÄÅÊò†Â∞Ñ
            if (accounts[accountName]) {
                return accounts[accountName];
            }
            
            // ÁÑ∂ÂêéÊ£ÄÊü•Âä®ÊÄÅÈí±ÂåÖÂàóË°®
            const wallet = allWallets.find(w => w.name === accountName);
            if (wallet) {
                return wallet.address;
            }
            
            // Â¶ÇÊûúÂ∑≤ÁªèÊòØÂú∞ÂùÄÊ†ºÂºèÔºåÁõ¥Êé•ËøîÂõû
            if (accountName && accountName.startsWith('feic1')) {
                return accountName;
            }
            
            console.error(`Êó†Ê≥ïÊâæÂà∞Ë¥¶Êà∑ ${accountName} ÁöÑÂú∞ÂùÄ`);
            return null;
        }

        let autoRefreshInterval;
        let isAutoRefreshing = true;

        // Ê∑ªÂä†Êó•ÂøóÂáΩÊï∞
        function addLog(level, message) {
            const logs = document.getElementById('blockchain-logs');
            const timestamp = new Date().toLocaleString();
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.innerHTML = `
                <span class="log-timestamp">[${timestamp}]</span>
                <span class="log-level-${level}">[${level.toUpperCase()}]</span> ${message}
            `;
            logs.insertBefore(logEntry, logs.firstChild);
            
            // ‰øùÊåÅÊúÄÊñ∞ÁöÑ100Êù°Êó•Âøó
            while (logs.children.length > 100) {
                logs.removeChild(logs.lastChild);
            }
        }

        // Ê∑ªÂä†ËΩ¨Ë¥¶‰∏ìÁî®Êó•ÂøóÂáΩÊï∞
        function addTransferLog(level, message) {
            const logs = document.getElementById('blockchain-logs');
            const timestamp = new Date().toLocaleString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry transfer-log`;
            logEntry.innerHTML = `
                <span class="log-timestamp">[${timestamp}]</span>
                <span class="log-level-${level}">[${level.toUpperCase()}]</span> ${message}
            `;
            logs.insertBefore(logEntry, logs.firstChild);
            
            // ‰øùÊåÅÊúÄÊñ∞ÁöÑ100Êù°Êó•Âøó
            while (logs.children.length > 100) {
                logs.removeChild(logs.lastChild);
            }
        }

        // Ê∑ªÂä†ÊàêÂäüÊó•ÂøóÂáΩÊï∞
        function addSuccessLog(message) {
            const logs = document.getElementById('blockchain-logs');
            const timestamp = new Date().toLocaleString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry success-log`;
            logEntry.innerHTML = `
                <span class="log-timestamp">[${timestamp}]</span>
                <span class="log-level-success">[SUCCESS]</span> ${message}
            `;
            logs.insertBefore(logEntry, logs.firstChild);
            
            // ‰øùÊåÅÊúÄÊñ∞ÁöÑ100Êù°Êó•Âøó
            while (logs.children.length > 100) {
                logs.removeChild(logs.lastChild);
            }
        }

        // Ê∑ªÂä†ÂàÜÂâ≤Á∫ø
        function addTransferSeparator() {
            const logs = document.getElementById('blockchain-logs');
            const separator = document.createElement('div');
            separator.className = 'transfer-separator';
            logs.insertBefore(separator, logs.firstChild);
        }

        // Ê∑ªÂä†ËΩ¨Ë¥¶ÁªìÊùüÂàÜÂâ≤Á∫ø
        function addTransferEndSeparator() {
            const logs = document.getElementById('blockchain-logs');
            const separator = document.createElement('div');
            separator.className = 'transfer-end-separator';
            logs.insertBefore(separator, logs.firstChild);
        }

        // ÊòæÁ§∫Áä∂ÊÄÅ‰ø°ÊÅØ
        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('transfer-status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
            
            if (type !== 'loading') {
                setTimeout(() => {
                    statusDiv.innerHTML = '';
                }, 5000);
            }
        }
        
        // ÊòæÁ§∫TokenÂ¢ûÂèëÁä∂ÊÄÅ‰ø°ÊÅØ
        function showMintStatus(message, type = 'info') {
            const statusDiv = document.getElementById('mint-status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
            
            if (type !== 'loading') {
                setTimeout(() => {
                    statusDiv.innerHTML = '';
                }, 5000);
            }
        }

        // Ëé∑Âèñ‰ΩôÈ¢ù - ÊîØÊåÅË¥¶Êà∑ÂêçÂíåÂú∞ÂùÄ
        async function getBalance(account) {
            try {
                // Â¶ÇÊûúÊòØÂú∞ÂùÄÁõ¥Êé•‰ΩøÁî®ÔºåÂ¶ÇÊûúÊòØË¥¶Êà∑ÂêçÂàô‰ªéaccountsÊü•Êâæ
                let address = account;
                if (accounts[account]) {
                    address = accounts[account];
                } else if (!account.startsWith('feic1')) {
                    // Â¶ÇÊûú‰∏çÊòØÂú∞ÂùÄ‰πü‰∏çÂú®accounts‰∏≠ÔºåÂ∞ùËØï‰ªéallWalletsÊü•Êâæ
                    const wallet = allWallets.find(w => w.name === account);
                    if (wallet) {
                        address = wallet.address;
                    }
                }
                
                const response = await fetch(`http://localhost:1317/cosmos/bank/v1beta1/balances/${address}`);
                const data = await response.json();
                return data.balances;
            } catch (error) {
                addLog('error', `Ëé∑Âèñ${account}‰ΩôÈ¢ùÂ§±Ë¥•: ${error.message}`);
                return [];
            }
        }

        // Âà∑Êñ∞‰ΩôÈ¢ùÊòæÁ§∫ - Áé∞Âú®Êõ¥Êñ∞Èí±ÂåÖÂàóË°®‰∏≠ÁöÑ‰ΩôÈ¢ù
        async function refreshBalances() {
            addLog('info', 'Ê≠£Âú®Âà∑Êñ∞Ë¥¶Êà∑‰ΩôÈ¢ù...');
            
            // Â¶ÇÊûúÈí±ÂåÖÂàóË°®Â∑≤Âä†ËΩΩÔºåÂàôÂà∑Êñ∞Èí±ÂåÖ‰ΩôÈ¢ùÊòæÁ§∫
            if (allWallets.length > 0) {
                for (const wallet of allWallets) {
                    try {
                        const balance = await getBalance(wallet.address);
                        const balanceElement = document.getElementById(`balance-${wallet.name}`);
                        if (balanceElement && balance.length > 0) {
                            const balanceHtml = balance.map(b => 
                                `${parseInt(b.amount).toLocaleString()} ${b.denom}`
                            ).join('<br>');
                            balanceElement.innerHTML = balanceHtml;
                        } else if (balanceElement) {
                            balanceElement.innerHTML = '0';
                        }
                    } catch (error) {
                        console.error(`Âà∑Êñ∞${wallet.name}‰ΩôÈ¢ùÂ§±Ë¥•:`, error);
                    }
                }
            }
            
            addLog('info', 'Èí±ÂåÖ‰ΩôÈ¢ùÂ∑≤Êõ¥Êñ∞');
        }

        // ÂÖ®Â±ÄÂèòÈáè
        let realTimeUpdateEnabled = true;
        let lastBlockTime = null;
        
        // Ëé∑ÂèñÂå∫ÂùóÈìæÁä∂ÊÄÅ
        async function getBlockchainStatus() {
            try {
                // Ëé∑ÂèñÊúÄÊñ∞Âå∫Âùó‰ø°ÊÅØ
                const blockResponse = await fetch('http://localhost:1317/cosmos/base/tendermint/v1beta1/blocks/latest');
                const blockData = await blockResponse.json();
                
                // Ëé∑ÂèñËäÇÁÇπ‰ø°ÊÅØ
                const nodeResponse = await fetch('http://localhost:1317/cosmos/base/tendermint/v1beta1/node_info');
                const nodeData = await nodeResponse.json();
                
                // Ëé∑ÂèñÈ™åËØÅËÄÖ‰ø°ÊÅØ
                const validatorResponse = await fetch('http://localhost:1317/cosmos/staking/v1beta1/validators');
                const validatorData = await validatorResponse.json();
                
                // Âü∫Á°Ä‰ø°ÊÅØÊõ¥Êñ∞
                document.getElementById('block-height').textContent = blockData.block.header.height;
                document.getElementById('validator-count').textContent = validatorData.validators.length;
                document.getElementById('chain-id').textContent = nodeData.default_node_info.network;
                document.getElementById('block-time').textContent = new Date(blockData.block.header.time).toLocaleTimeString();
                
                // ËÆ°ÁÆóÂå∫ÂùóÈó¥Èöî
                const currentBlockTime = new Date(blockData.block.header.time);
                if (lastBlockTime) {
                    const interval = Math.round((currentBlockTime - lastBlockTime) / 1000);
                    document.getElementById('block-interval').textContent = `${interval}s`;
                } else {
                    document.getElementById('block-interval').textContent = 'ËÆ°ÁÆó‰∏≠...';
                }
                lastBlockTime = currentBlockTime;
                
                // Âå∫ÂùóËØ¶ÊÉÖ
                document.getElementById('block-hash').textContent = blockData.block_id.hash.substring(0, 16) + '...';
                document.getElementById('tx-count').textContent = blockData.block.data.txs ? blockData.block.data.txs.length : 0;
                
                // ËÆ°ÁÆóÂå∫ÂùóÂ§ßÂ∞è
                const blockSize = JSON.stringify(blockData.block).length;
                document.getElementById('block-size').textContent = `${(blockSize / 1024).toFixed(1)} KB`;
                
                // Ëé∑ÂèñÂá∫ÂùóÈ™åËØÅËÄÖ
                if (blockData.block.header.proposer_address) {
                    const proposerAddr = blockData.block.header.proposer_address;
                    const proposer = validatorData.validators.find(v => 
                        v.consensus_pubkey && v.consensus_pubkey.key
                    );
                    document.getElementById('proposer').textContent = proposer ? 
                        (proposer.description.moniker || 'Êú™Áü•È™åËØÅËÄÖ') : proposerAddr.substring(0, 8) + '...';
                } else {
                    document.getElementById('proposer').textContent = 'Ëé∑Âèñ‰∏≠...';
                }
                
                addLog('info', `Âå∫Âùó #${blockData.block.header.height} Â∑≤Á°ÆËÆ§ÔºåÂåÖÂê´ ${blockData.block.data.txs ? blockData.block.data.txs.length : 0} Á¨î‰∫§Êòì`);
            } catch (error) {
                addLog('error', `Ëé∑ÂèñÂå∫ÂùóÈìæÁä∂ÊÄÅÂ§±Ë¥•: ${error.message}`);
            }
        }
        
        // Ëé∑ÂèñË¥®Êäº‰ø°ÊÅØ
        async function getStakingInfo() {
            try {
                // Ëé∑ÂèñË¥®ÊäºÊ±†‰ø°ÊÅØ
                const poolResponse = await fetch('http://localhost:1317/cosmos/staking/v1beta1/pool');
                const poolData = await poolResponse.json();
                
                // Ëé∑ÂèñÈ™åËØÅËÄÖ‰ø°ÊÅØ
                const validatorResponse = await fetch('http://localhost:1317/cosmos/staking/v1beta1/validators');
                const validatorData = await validatorResponse.json();
                
                // Ëé∑Âèñ‰ª£Â∏ÅÊÄª‰æõÂ∫îÈáè
                const supplyResponse = await fetch('http://localhost:1317/cosmos/bank/v1beta1/supply');
                const supplyData = await supplyResponse.json();
                
                // Ê¥ªË∑ÉÈ™åËØÅËÄÖÊï∞Èáè
                const activeValidators = validatorData.validators.filter(v => v.status === 'BOND_STATUS_BONDED').length;
                document.getElementById('active-validators').textContent = `${activeValidators}/${validatorData.validators.length}`;
                
                // ÊÄªË¥®ÊäºÈáè - ÊòæÁ§∫ÂÆåÊï¥Â∞èÊï∞‰Ωç
                const bondedTokens = parseInt(poolData.pool.bonded_tokens);
                const bondedAmount = (bondedTokens / 1000000).toFixed(6);
                document.getElementById('total-bonded').textContent = `${bondedAmount} stake`;
                
                // Ë¥®ÊäºÁéáËÆ°ÁÆó - Êõ¥Á≤æÁ°ÆÁöÑÁôæÂàÜÊØî
                const stakeSupply = supplyData.supply.find(s => s.denom === 'stake');
                if (stakeSupply) {
                    const totalStake = parseInt(stakeSupply.amount);
                    const bondedRatio = ((bondedTokens / totalStake) * 100).toFixed(4);
                    document.getElementById('bonded-ratio').textContent = `${bondedRatio}%`;
                } else {
                    document.getElementById('bonded-ratio').textContent = 'ËÆ°ÁÆó‰∏≠...';
                }
                
            } catch (error) {
                console.error('Ëé∑ÂèñË¥®Êäº‰ø°ÊÅØÂ§±Ë¥•:', error);
                document.getElementById('active-validators').textContent = 'Ëé∑ÂèñÂ§±Ë¥•';
                document.getElementById('total-bonded').textContent = 'Ëé∑ÂèñÂ§±Ë¥•';
                document.getElementById('bonded-ratio').textContent = 'Ëé∑ÂèñÂ§±Ë¥•';
            }
        }
        
        // Ëé∑ÂèñÊ≤ªÁêÜ‰ø°ÊÅØ
        async function getGovernanceInfo() {
            try {
                // Ëé∑ÂèñÊèêÊ°à‰ø°ÊÅØ
                const proposalsResponse = await fetch('http://localhost:1317/cosmos/gov/v1beta1/proposals');
                const proposalsData = await proposalsResponse.json();
                
                // Ëé∑ÂèñÈÄöËÉÄÁéá
                const mintResponse = await fetch('http://localhost:1317/cosmos/mint/v1beta1/inflation');
                const mintData = await mintResponse.json();
                
                // Ëé∑ÂèñÁ§æÂå∫Ê±†
                const communityResponse = await fetch('http://localhost:1317/cosmos/distribution/v1beta1/community_pool');
                const communityData = await communityResponse.json();
                
                // Êõ¥Êñ∞ÊèêÊ°à‰ø°ÊÅØ
                const totalProposals = proposalsData.proposals ? proposalsData.proposals.length : 0;
                document.getElementById('total-proposals').textContent = totalProposals;
                
                const activeProposals = proposalsData.proposals ? 
                    proposalsData.proposals.filter(p => p.status === 'PROPOSAL_STATUS_VOTING_PERIOD').length : 0;
                document.getElementById('active-proposals').textContent = activeProposals;
                
                // ÈÄöËÉÄÁéá
                if (mintData.inflation) {
                    const inflation = (parseFloat(mintData.inflation) * 100).toFixed(2);
                    document.getElementById('inflation-rate').textContent = `${inflation}%`;
                } else {
                    document.getElementById('inflation-rate').textContent = '0.00%';
                }
                
                // Á§æÂå∫Ê±† - ÊòæÁ§∫Â∞èÊï∞‰Ωç
                if (communityData.pool && communityData.pool.length > 0) {
                    const stakeInPool = communityData.pool.find(coin => coin.denom === 'stake');
                    if (stakeInPool) {
                        const amount = (parseFloat(stakeInPool.amount) / 1000000).toFixed(6);
                        document.getElementById('community-pool').textContent = `${amount} stake`;
                    } else {
                        document.getElementById('community-pool').textContent = '0.000000 stake';
                    }
                } else {
                    document.getElementById('community-pool').textContent = '0.000000 stake';
                }
                
            } catch (error) {
                console.error('Ëé∑ÂèñÊ≤ªÁêÜ‰ø°ÊÅØÂ§±Ë¥•:', error);
                document.getElementById('total-proposals').textContent = 'Ëé∑ÂèñÂ§±Ë¥•';
                document.getElementById('active-proposals').textContent = 'Ëé∑ÂèñÂ§±Ë¥•';
                document.getElementById('inflation-rate').textContent = 'Ëé∑ÂèñÂ§±Ë¥•';
                document.getElementById('community-pool').textContent = 'Ëé∑ÂèñÂ§±Ë¥•';
            }
        }
        
        // Âà∑Êñ∞ÊâÄÊúâÂå∫ÂùóÈìæÊï∞ÊçÆ
        async function refreshAllBlockchainData() {
            const btn = document.getElementById('refresh-blockchain-btn');
            btn.textContent = 'üîÑ Âà∑Êñ∞‰∏≠...';
            btn.disabled = true;
            
            try {
                await Promise.all([
                    getBlockchainStatus(),
                    getStakingInfo(),
                    getGovernanceInfo()
                ]);
                addLog('info', '‚úÖ ÊâÄÊúâÂå∫ÂùóÈìæÊï∞ÊçÆÂ∑≤Âà∑Êñ∞');
            } catch (error) {
                addLog('error', `‚ùå Âà∑Êñ∞Êï∞ÊçÆÂ§±Ë¥•: ${error.message}`);
            } finally {
                btn.textContent = 'üîÑ Âà∑Êñ∞ÊâÄÊúâÊï∞ÊçÆ';
                btn.disabled = false;
            }
        }
        
        // ÂàáÊç¢ÂÆûÊó∂Êõ¥Êñ∞
        function toggleRealTimeUpdate() {
            realTimeUpdateEnabled = !realTimeUpdateEnabled;
            const btn = document.getElementById('realtime-btn');
            
            if (realTimeUpdateEnabled) {
                btn.textContent = '‚ö° ÂÆûÊó∂Êõ¥Êñ∞: ÂºÄÂêØ';
                btn.style.background = '#17a2b8';
                addLog('info', '‚úÖ ÂÆûÊó∂Êõ¥Êñ∞Â∑≤ÂºÄÂêØ');
            } else {
                btn.textContent = '‚è∏Ô∏è ÂÆûÊó∂Êõ¥Êñ∞: ÂÖ≥Èó≠';
                btn.style.background = '#6c757d';
                addLog('info', '‚è∏Ô∏è ÂÆûÊó∂Êõ¥Êñ∞Â∑≤ÂÖ≥Èó≠');
            }
        }

        // ÁúüÂÆûËΩ¨Ë¥¶ÂäüËÉΩ - ‰ΩøÁî® CLI ÂëΩ‰ª§ÊâßË°åÂÆûÈôÖËΩ¨Ë¥¶
        async function sendTransfer() {
            const fromAccount = document.getElementById('from-account').value;
            const toAccount = document.getElementById('to-account').value;
            const amount = document.getElementById('amount').value;
            const denom = document.getElementById('denom').value;

            if (!amount || amount <= 0) {
                showStatus('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑËΩ¨Ë¥¶ÈáëÈ¢ù', 'error');
                return;
            }

            if (fromAccount === toAccount) {
                showStatus('‰∏çËÉΩÂêëËá™Â∑±ËΩ¨Ë¥¶', 'error');
                return;
            }

            // È™åËØÅË¥¶Êà∑Âú∞ÂùÄ
            const fromAddress = getAccountAddress(fromAccount);
            const toAddress = getAccountAddress(toAccount);
            
            if (!fromAddress) {
                showStatus(`Êó†Ê≥ïÊâæÂà∞ÂèëÈÄÅË¥¶Êà∑ ${fromAccount} ÁöÑÂú∞ÂùÄ`, 'error');
                return;
            }
            
            if (!toAddress) {
                showStatus(`Êó†Ê≥ïÊâæÂà∞Êé•Êî∂Ë¥¶Êà∑ ${toAccount} ÁöÑÂú∞ÂùÄ`, 'error');
                return;
            }

            // Á¶ÅÁî®ÊåâÈíÆ
            document.getElementById('transfer-btn').disabled = true;
            showStatus(`Ê≠£Âú®Â§ÑÁêÜ‰ªé ${fromAccount} Âà∞ ${toAccount} ÁöÑ ${amount} ${denom} ËΩ¨Ë¥¶...`, 'loading');
            
            // Ê∑ªÂä†ËΩ¨Ë¥¶ÂºÄÂßãÂàÜÂâ≤Á∫ø
            addTransferSeparator();
            
            addTransferLog('transfer', `üöÄ ÁúüÂÆûËΩ¨Ë¥¶‰∫§ÊòìÂºÄÂßãÔºÅ`);
            addTransferLog('transfer', `üì§ ÂèëÈÄÅÊñπ: ${fromAccount.toUpperCase()} ‚Üí ${getAccountAddress(fromAccount)}`);
            addTransferLog('transfer', `üì• Êé•Êî∂Êñπ: ${toAccount.toUpperCase()} ‚Üí ${getAccountAddress(toAccount)}`);
            addTransferLog('transfer', `üí∞ ËΩ¨Ë¥¶ÈáëÈ¢ù: ${parseInt(amount).toLocaleString()} ${denom.toUpperCase()}`);
            
            try {
                addTransferLog('transfer', 'üîç Á¨¨1Ê≠•ÔºöÈ™åËØÅË¥¶Êà∑‰ΩôÈ¢ù...');
                
                // Ê£ÄÊü•ÂèëÈÄÅÊñπ‰ΩôÈ¢ù
                const senderBalance = await getBalance(fromAccount);
                const tokenBalance = senderBalance.find(b => b.denom === denom);
                
                if (!tokenBalance || parseInt(tokenBalance.amount) < parseInt(amount)) {
                    throw new Error(`‰ΩôÈ¢ù‰∏çË∂≥„ÄÇÈúÄË¶Å ${amount} ${denom}Ôºå‰ΩÜÂè™Êúâ ${tokenBalance ? tokenBalance.amount : 0} ${denom}`);
                }
                
                addTransferLog('transfer', '‚úÖ ‰ΩôÈ¢ùÈ™åËØÅÈÄöËøá - Ë¥¶Êà∑ËµÑÈáëÂÖÖË∂≥');
                addTransferLog('transfer', 'üîê Á¨¨2Ê≠•ÔºöÈÄöËøáËΩ¨Ë¥¶ÊúçÂä°Âô®ÊâßË°å‰∫§Êòì...');
                
                try {
                    const response = await fetch('http://localhost:3001/transfer', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            fromAccount: fromAccount,
                            toAccount: getAccountAddress(toAccount),
                            amount: amount,
                            denom: denom
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        addTransferLog('transfer', '‚úÖ ËΩ¨Ë¥¶ÂëΩ‰ª§ÊâßË°åÊàêÂäü');
                        addTransferLog('transfer', 'üì° Á¨¨3Ê≠•Ôºö‰∫§ÊòìÂ∑≤ÂπøÊí≠Âà∞Âå∫ÂùóÈìæÁΩëÁªú...');
                        
                        // ‰ªéËøîÂõûÁªìÊûú‰∏≠ÊèêÂèñ‰∫§ÊòìÂìàÂ∏å
                        const txHashMatch = result.output.match(/txhash: ([A-F0-9]+)/);
                        const txHash = txHashMatch ? txHashMatch[1] : null;
                        
                        if (txHash) {
                            addTransferLog('transfer', `üìã ‰∫§ÊòìÂìàÂ∏å: ${txHash}`);
                            addTransferLog('transfer', '‚õìÔ∏è Á¨¨4Ê≠•ÔºöÁ≠âÂæÖÂå∫ÂùóÈìæÁΩëÁªúÁ°ÆËÆ§‰∫§Êòì...');
                            addTransferLog('transfer', 'üîç ÂºÄÂßãÁõëÊéß‰∫§ÊòìÁä∂ÊÄÅ...');
                            
                            // ÁúüÊ≠£Á≠âÂæÖÂå∫ÂùóÁ°ÆËÆ§
                            let confirmed = false;
                            let attempts = 0;
                            const maxAttempts = 30; // ÊúÄÂ§öÁ≠âÂæÖ30Ê¨°ÔºåÊØèÊ¨°2Áßí
                            
                            while (!confirmed && attempts < maxAttempts) {
                                attempts++;
                                await new Promise(resolve => setTimeout(resolve, 2000));
                                
                                try {
                                    addTransferLog('transfer', `üîÑ Á¨¨${attempts}Ê¨°Êü•ËØ¢: Ê£ÄÊü•‰∫§ÊòìÊòØÂê¶Ë¢´ÊâìÂåÖÂà∞Âå∫Âùó‰∏≠...`);
                                    
                                    // Êü•ËØ¢‰∫§ÊòìÁä∂ÊÄÅ
                                    const txResponse = await fetch(`http://localhost:1317/cosmos/tx/v1beta1/txs/${txHash}`);
                                    
                                    if (txResponse.ok) {
                                        const txData = await txResponse.json();
                                        
                                        if (txData.tx_response) {
                                            const currentHeight = txData.tx_response.height;
                                            
                                            if (currentHeight === "0") {
                                                addTransferLog('transfer', `‚è≥ ‰∫§ÊòìËøòÂú®ÂÜÖÂ≠òÊ±†‰∏≠ÔºåÁ≠âÂæÖÈ™åËØÅËÄÖÊâìÂåÖ...`);
                                                
                                                // ÊòæÁ§∫Á≠âÂæÖËøõÂ∫¶
                                                const progress = Math.round((attempts / maxAttempts) * 100);
                                                addTransferLog('transfer', `üìä Á≠âÂæÖËøõÂ∫¶: ${progress}% (${attempts}/${maxAttempts})`);
                                            } else {
                                                confirmed = true;
                                                addTransferLog('transfer', `üéâ ‰∫§ÊòìÊàêÂäüÊâìÂåÖÔºÅÂå∫ÂùóÈ´òÂ∫¶: #${currentHeight}`);
                                                addTransferLog('transfer', `‚úÖ È™åËØÅËÄÖËäÇÁÇπÂ∑≤È™åËØÅÂπ∂Á°ÆËÆ§‰∫§Êòì`);
                                                addTransferLog('transfer', `üì¶ ‰∫§ÊòìÂ∑≤Ê∞∏‰πÖËÆ∞ÂΩïÂú®Âå∫ÂùóÈìæ‰∏ä`);
                                                addTransferLog('transfer', `‚õΩ Gas Ê∂àËÄó: ${txData.tx_response.gas_used}/${txData.tx_response.gas_wanted}`);
                                                
                                                // ÊòæÁ§∫ÊâãÁª≠Ë¥π‰ø°ÊÅØ
                                                if (txData.tx && txData.tx.auth_info && txData.tx.auth_info.fee) {
                                                    const fee = txData.tx.auth_info.fee;
                                                    if (fee.amount && fee.amount.length > 0) {
                                                        const feeAmount = fee.amount.map(f => `${f.amount} ${f.denom}`).join(', ');
                                                        addTransferLog('transfer', `üí≥ ÂÆûÈôÖÊâãÁª≠Ë¥π: ${feeAmount}`);
                                                    } else {
                                                        addTransferLog('transfer', `üí≥ ÂÆûÈôÖÊâãÁª≠Ë¥π: ÂÖçË¥π‰∫§Êòì (Gas Price = 0)`);
                                                    }
                                                } else {
                                                    addTransferLog('transfer', `üí≥ ÊâãÁª≠Ë¥π‰ø°ÊÅØ: Êú™ËÆæÁΩÆÊàñÂÖçË¥πÁΩëÁªú`);
                                                }
                                                
                                                addTransferLog('transfer', `üìÖ Âå∫ÂùóÁ°ÆËÆ§Êó∂Èó¥: ${new Date(txData.tx_response.timestamp).toLocaleString()}`);
                                                
                                                // ÊòæÁ§∫‰∫§ÊòìËØ¶ÊÉÖ
                                                if (txData.tx_response.events) {
                                                    const transferEvent = txData.tx_response.events.find(e => e.type === 'transfer');
                                                    if (transferEvent) {
                                                        const amountAttr = transferEvent.attributes.find(a => a.key === 'amount');
                                                        if (amountAttr) {
                                                            addTransferLog('transfer', `üí∞ Èìæ‰∏äÁ°ÆËÆ§ÈáëÈ¢ù: ${amountAttr.value}`);
                                                        }
                                                    }
                                                }
                                                break;
                                            }
                                        } else {
                                            addTransferLog('transfer', `‚ö†Ô∏è ‰∫§ÊòìÊï∞ÊçÆÊ†ºÂºèÂºÇÂ∏∏ÔºåÁªßÁª≠Á≠âÂæÖ...`);
                                        }
                                    } else {
                                        addTransferLog('transfer', `üîç ‰∫§ÊòìËøòÊú™Ë¢´ÁΩëÁªúÊé•Êî∂ÔºåÁªßÁª≠ÁõëÊéß...`);
                                    }
                                } catch (queryError) {
                                    addTransferLog('transfer', `‚ö†Ô∏è ÁΩëÁªúÊü•ËØ¢Â§±Ë¥•: ${queryError.message}`);
                                    addTransferLog('transfer', `üîÑ Â∞ÜÂú®2ÁßíÂêéÈáçËØï...`);
                                }
                            }
                            
                            if (!confirmed) {
                                addTransferLog('transfer', '‚è∞ Ë∂ÖÊó∂ÔºöÊú™ËÉΩÂú®È¢ÑÊúüÊó∂Èó¥ÂÜÖÁ°ÆËÆ§Ôºå‰ΩÜ‰∫§ÊòìÂèØËÉΩ‰ªçÂú®Â§ÑÁêÜ‰∏≠');
                            }
                        } else {
                            addTransferLog('transfer', '‚ö†Ô∏è Êú™ËÉΩËé∑Âèñ‰∫§ÊòìÂìàÂ∏åÔºå‰ΩøÁî®Â§áÁî®Á°ÆËÆ§ÊñπÂºè');
                            await new Promise(resolve => setTimeout(resolve, 5000));
                        }
                        
                        addTransferLog('transfer', 'üîç Á¨¨5Ê≠•ÔºöÈ™åËØÅ‰∫§ÊòìÁªìÊûú...');
                        
                        // Ê£ÄÊü•‰ΩôÈ¢ùÂèòÂåñ
                        const newSenderBalance = await getBalance(fromAccount);
                        const newReceiverBalance = await getBalance(toAccount);
                        
                        const newSenderTokenBalance = newSenderBalance.find(b => b.denom === denom);
                        const newReceiverTokenBalance = newReceiverBalance.find(b => b.denom === denom);
                        
                        // ÊØîËæÉ‰ΩôÈ¢ùÂèòÂåñ
                        const oldSenderAmount = parseInt(tokenBalance.amount);
                        const newSenderAmount = newSenderTokenBalance ? parseInt(newSenderTokenBalance.amount) : 0;
                        
                        if (newSenderAmount < oldSenderAmount) {
                            addSuccessLog('üéâ ËΩ¨Ë¥¶ÊàêÂäüÔºÅ‰∫§ÊòìÂ∑≤Âú®Âå∫ÂùóÈìæ‰∏äÁ°ÆËÆ§');
                            addSuccessLog(`üí∏ ${fromAccount.toUpperCase()} ‰ΩôÈ¢ùÂáèÂ∞ë ${oldSenderAmount - newSenderAmount} ${denom}`);
                            addSuccessLog(`üí∞ ${toAccount.toUpperCase()} ÂΩìÂâç‰ΩôÈ¢ù: ${newReceiverTokenBalance ? parseInt(newReceiverTokenBalance.amount).toLocaleString() : 0} ${denom}`);
                            addSuccessLog('üìä ÁúüÂÆûÂå∫ÂùóÈìæ‰∫§ÊòìÂÆåÊàê');
                            showStatus(`üéâ ËΩ¨Ë¥¶ÊàêÂäüÔºÅ‰ªé ${fromAccount} Âêë ${toAccount} ËΩ¨Ë¥¶ ${amount} ${denom}`, 'success');
                        } else {
                            addTransferLog('transfer', '‚ö†Ô∏è ‰ΩôÈ¢ùÊú™ÂèòÂåñÔºåÂèØËÉΩÈúÄË¶ÅÊõ¥Â§öÊó∂Èó¥Á°ÆËÆ§');
                            showStatus('ËΩ¨Ë¥¶Â∑≤Êèê‰∫§ÔºåËØ∑Á®çÂêéÊü•Áúã‰ΩôÈ¢ùÂèòÂåñ', 'success');
                        }
                        
                        // Ê∑ªÂä†ËΩ¨Ë¥¶ÁªìÊùüÂàÜÂâ≤Á∫ø
                        addTransferEndSeparator();
                        
                        // Âà∑Êñ∞‰ΩôÈ¢ùÊòæÁ§∫
                        refreshBalances();
                        
                        // ÈáçÊñ∞ÂêØÁî®ËΩ¨Ë¥¶ÊåâÈíÆ
                        document.getElementById('transfer-btn').disabled = false;
                        
                    } else {
                        throw new Error(result.error || 'ËΩ¨Ë¥¶ÊúçÂä°Âô®ËøîÂõûÈîôËØØ');
                    }
                    
                } catch (transferError) {
                    addTransferLog('transfer', '‚ùå Ëá™Âä®ËΩ¨Ë¥¶Â§±Ë¥•ÔºåÂ∞ùËØïÊâãÂä®ÊñπÂºè...');
                    addTransferLog('transfer', `ÈîôËØØ‰ø°ÊÅØ: ${transferError.message}`);
                    
                    // Êèê‰æõÊâãÂä®ÂëΩ‰ª§‰Ωú‰∏∫Â§áÈÄâÊñπÊ°à
                    const toAddress = getAccountAddress(toAccount);
                    if (toAddress) {
                        const transferCommand = `/Users/ggbond/go/bin/feicoind tx bank send ${fromAccount} ${toAddress} ${amount}${denom} --from ${fromAccount} --keyring-backend test --chain-id feicoin --yes --node http://localhost:26657`;
                        addTransferLog('transfer', 'üìã ËØ∑Âú®ÁªàÁ´ØÊâãÂä®ÊâßË°å‰ª•‰∏ãÂëΩ‰ª§:');
                        addTransferLog('transfer', `üîß ${transferCommand}`);
                    } else {
                        addTransferLog('transfer', '‚ùå Êó†Ê≥ïÁîüÊàêÊâãÂä®ÂëΩ‰ª§ÔºöÁõÆÊ†áË¥¶Êà∑Âú∞ÂùÄÊó†Êïà');
                    }
                    
                    // 10ÁßíÂêéÊ£ÄÊü•‰ΩôÈ¢ùÂèòÂåñ
                    setTimeout(async () => {
                        refreshBalances();
                        addTransferLog('transfer', 'üîÑ Â∑≤Âà∑Êñ∞‰ΩôÈ¢ùÔºåÂ¶ÇÊúâÂèòÂåñÂàôË°®Á§∫ËΩ¨Ë¥¶ÊàêÂäü');
                        addTransferEndSeparator();
                        // ÈáçÊñ∞ÂêØÁî®ËΩ¨Ë¥¶ÊåâÈíÆ
                        document.getElementById('transfer-btn').disabled = false;
                    }, 10000);
                    
                    showStatus('Ëá™Âä®ËΩ¨Ë¥¶Â§±Ë¥•ÔºåËØ∑Êü•ÁúãÊó•Âøó‰∏≠ÁöÑÊâãÂä®ÂëΩ‰ª§', 'error');
                }
                
            } catch (error) {
                addLog('error', `‚ùå ËΩ¨Ë¥¶Â§±Ë¥•: ${error.message}`);
                addTransferEndSeparator();
                showStatus('ËΩ¨Ë¥¶Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•ÂíåË¥¶Êà∑Áä∂ÊÄÅ', 'error');
                // ÈáçÊñ∞ÂêØÁî®ÊåâÈíÆ
                document.getElementById('transfer-btn').disabled = false;
            }
        }

        // Ê∏ÖÈô§Êó•Âøó
        function clearLogs() {
            document.getElementById('blockchain-logs').innerHTML = '';
            addLog('info', 'Êó•ÂøóÂ∑≤Ê∏ÖÈô§');
        }

        // ÂàáÊç¢Ëá™Âä®Âà∑Êñ∞
        function toggleAutoRefresh() {
            const button = document.getElementById('auto-refresh-text');
            if (isAutoRefreshing) {
                clearInterval(autoRefreshInterval);
                isAutoRefreshing = false;
                button.textContent = '‚ñ∂Ô∏è ÂºÄÂßãËá™Âä®Âà∑Êñ∞';
                addLog('info', 'Ëá™Âä®Âà∑Êñ∞Â∑≤ÂÅúÊ≠¢');
            } else {
                startAutoRefresh();
                isAutoRefreshing = true;
                button.textContent = '‚è∏Ô∏è ÂÅúÊ≠¢Ëá™Âä®Âà∑Êñ∞';
                addLog('info', 'Ëá™Âä®Âà∑Êñ∞Â∑≤ÂêØÂä®');
            }
        }

        // ÂêØÂä®Ëá™Âä®Âà∑Êñ∞
        function startAutoRefresh() {
            autoRefreshInterval = setInterval(() => {
                if (realTimeUpdateEnabled) {
                    refreshBalances();
                    getBlockchainStatus();
                    getStakingInfo();
                    getGovernanceInfo();
                }
            }, 10000); // ÊØè10ÁßíÂà∑Êñ∞‰∏ÄÊ¨°
        }

        // ÁúüÂÆûÂå∫ÂùóÈìæ‰∫ã‰ª∂ÁõëÊéß
        let lastBlockHeight = 0;
        function monitorBlockchainEvents() {
            setInterval(async () => {
                try {
                    // Ëé∑ÂèñÊúÄÊñ∞Âå∫Âùó‰ø°ÊÅØ
                    const response = await fetch('http://localhost:1317/cosmos/base/tendermint/v1beta1/blocks/latest');
                    const data = await response.json();
                    const currentHeight = parseInt(data.block.header.height);
                    
                    // Ê£ÄÊµãÊñ∞Âå∫Âùó
                    if (lastBlockHeight > 0 && currentHeight > lastBlockHeight) {
                        const newBlocks = currentHeight - lastBlockHeight;
                        if (newBlocks === 1) {
                            addLog('info', `‚õìÔ∏è Êñ∞Âå∫Âùó #${currentHeight} Â∑≤ÁîüÊàê`);
                        } else {
                            addLog('info', `‚õìÔ∏è Ê£ÄÊµãÂà∞ ${newBlocks} ‰∏™Êñ∞Âå∫ÂùóÔºåÂΩìÂâçÈ´òÂ∫¶: ${currentHeight}`);
                        }
                        
                        // Ê£ÄÊü•Âå∫Âùó‰∏≠ÊòØÂê¶Êúâ‰∫§Êòì
                        const txCount = data.block.data.txs ? data.block.data.txs.length : 0;
                        if (txCount > 0) {
                            addLog('info', `üì¶ Âå∫Âùó #${currentHeight} ÂåÖÂê´ ${txCount} Á¨î‰∫§Êòì`);
                        }
                        
                        // ÂêåÊó∂Êõ¥Êñ∞È°µÈù¢ÊòæÁ§∫ÁöÑÂå∫ÂùóÈ´òÂ∫¶
                        document.getElementById('block-height').textContent = currentHeight;
                    }
                    
                    lastBlockHeight = currentHeight;
                } catch (error) {
                    // ÈùôÈªòÂ§ÑÁêÜÈîôËØØÔºåÈÅøÂÖçÊó•ÂøóÂô™Èü≥
                }
            }, 5000); // ÊØè5ÁßíÊ£ÄÊü•‰∏ÄÊ¨°Êñ∞Âå∫Âùó
        }

        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
        window.addEventListener('load', async () => {
            addLog('info', 'üöÄ FeiCoin Âå∫ÂùóÈìæÊµèËßàÂô®Â∑≤ÂêØÂä®');
            addLog('info', 'üîó Ê≠£Âú®ËøûÊé•Âà∞Êú¨Âú∞ËäÇÁÇπ...');
            
            try {
                // ÂàùÂßãÂåñTabÈ°µÈù¢
                initializeTabs();
                
                // ÂàùÂßãÂåñÂå∫ÂùóÈìæÊï∞ÊçÆ
                await refreshAllBlockchainData();
                addLog('info', '‚úÖ ÊàêÂäüËøûÊé•Âà∞Âå∫ÂùóÈìæÁΩëÁªú');
                
                // ÂàùÂßãÂåñÈí±ÂåÖÂíåÈ™åËØÅËÄÖÂàóË°®
                await refreshWalletList();
                await refreshValidatorList();
                
                // ÂàùÂßãÂåñTokenÁªüËÆ°
                await refreshTokenStats();
                
                // ÂàùÂßãÂåñÂ•ñÂä±ÁÆ°ÁêÜ
                await refreshRewards();
                
                // ÂêØÂä®Ëá™Âä®Âà∑Êñ∞
                startAutoRefresh();
                
                // ÂêØÂä®ÁúüÂÆûÂå∫ÂùóÈìæ‰∫ã‰ª∂ÁõëÊéß
                monitorBlockchainEvents();
                
            } catch (error) {
                addLog('error', `‚ùå ËøûÊé•Â§±Ë¥•: ${error.message}`);
                addLog('warning', 'ËØ∑Á°Æ‰øùÂå∫ÂùóÈìæËäÇÁÇπÊ≠£Âú®ËøêË°å (ignite chain serve)');
            }
        });

        // ===========================================
        // TokenÁÆ°ÁêÜÂäüËÉΩ
        // ===========================================
        
        let tokenStats = {
            totalSupply: { token: 0, stake: 0 },
            circulation: { token: 0, stake: 0 },
            holders: { token: 0, stake: 0 }
        };
        
        // ÊòæÁ§∫TokenÂ¢ûÂèëË°®Âçï
        async function showMintTokenForm() {
            hideMintTokenForm();
            document.getElementById('mint-token-form').style.display = 'block';
            
            // Â¶ÇÊûúÈí±ÂåÖÂàóË°®‰∏∫Á©∫ÔºåÂÖàÂà∑Êñ∞Èí±ÂåÖÂàóË°®
            if (allWallets.length === 0) {
                addLog('info', 'üîÑ Ê≠£Âú®Âä†ËΩΩÈí±ÂåÖÂàóË°®...');
                await refreshWalletList();
            }
            
            updateMintAccountOptions();
            setupMintFormListeners();
        }
        
        // ËÆæÁΩÆÂ¢ûÂèëË°®ÂçïÁõëÂê¨Âô®
        function setupMintFormListeners() {
            const toAccountSelect = document.getElementById('mint-to-account');
            const toAccountCustom = document.getElementById('mint-to-custom');
            
            // ÂΩìÈÄâÊã©‰∏ãÊãâÊ°ÜÊó∂ÔºåÊ∏ÖÁ©∫Ëá™ÂÆö‰πâËæìÂÖ•Ê°Ü
            toAccountSelect.addEventListener('change', function() {
                if (this.value) {
                    toAccountCustom.value = '';
                }
            });
            
            // ÂΩìÂú®Ëá™ÂÆö‰πâËæìÂÖ•Ê°ÜËæìÂÖ•Êó∂ÔºåÊ∏ÖÁ©∫‰∏ãÊãâÊ°ÜÈÄâÊã©
            toAccountCustom.addEventListener('input', function() {
                if (this.value.trim()) {
                    toAccountSelect.value = '';
                }
            });
        }
        
        // ÈöêËóèTokenÂ¢ûÂèëË°®Âçï
        function hideMintTokenForm() {
            document.getElementById('mint-token-form').style.display = 'none';
            
            // ÈáçÁΩÆÊåâÈíÆÁä∂ÊÄÅ
            const mintBtn = document.getElementById('mint-btn');
            if (mintBtn) {
                mintBtn.disabled = false;
                mintBtn.textContent = 'üî® ÊâßË°åÂ¢ûÂèë';
            }
        }
        
        // Êõ¥Êñ∞Â¢ûÂèëË¥¶Êà∑ÈÄâÈ°π
        function updateMintAccountOptions() {
            const fromSelect = document.getElementById('mint-from-account');
            const toSelect = document.getElementById('mint-to-account');
            
            if (allWallets.length > 0) {
                // Êõ¥Êñ∞ÂèëÈÄÅÊñπË¥¶Êà∑ÈÄâÈ°π
                if (fromSelect) {
                    fromSelect.innerHTML = '<option value="">ÈÄâÊã©ÁÆ°ÁêÜÂëòË¥¶Êà∑</option>';
                    allWallets.forEach(wallet => {
                        fromSelect.innerHTML += `<option value="${wallet.name}">${wallet.name}</option>`;
                    });
                }
                
                // Êõ¥Êñ∞Êé•Êî∂ÊñπË¥¶Êà∑ÈÄâÈ°π
                if (toSelect) {
                    toSelect.innerHTML = '<option value="">ÈÄâÊã©Êé•Êî∂Ë¥¶Êà∑</option>';
                    allWallets.forEach(wallet => {
                        toSelect.innerHTML += `<option value="${wallet.address}" data-name="${wallet.name}">${wallet.name} (${wallet.address})</option>`;
                    });
                }
                
                addLog('info', `‚úÖ Â∑≤Âä†ËΩΩ ${allWallets.length} ‰∏™Èí±ÂåÖÂà∞Â¢ûÂèëË°®Âçï`);
            } else {
                // Èí±ÂåÖÂàóË°®‰∏∫Á©∫Êó∂ÁöÑÂ§ÑÁêÜ
                if (fromSelect) {
                    fromSelect.innerHTML = '<option value="">Ê≠£Âú®Âä†ËΩΩÈí±ÂåÖ...</option>';
                }
                if (toSelect) {
                    toSelect.innerHTML = '<option value="">Ê≠£Âú®Âä†ËΩΩÈí±ÂåÖ...</option>';
                }
                addLog('warning', '‚ö†Ô∏è Èí±ÂåÖÂàóË°®‰∏∫Á©∫ÔºåËØ∑Ê£ÄÊü•ËäÇÁÇπËøûÊé•Áä∂ÊÄÅ');
            }
        }
        
        // ÊâßË°åTokenÂ¢ûÂèë
        async function mintTokens() {
            console.log('mintTokensÂáΩÊï∞Ë¢´Ë∞ÉÁî®');
            addLog('info', 'üîÑ ÂºÄÂßãÊâßË°åTokenÂ¢ûÂèë...');
            
            const fromAccount = document.getElementById('mint-from-account').value;
            const toAccountSelect = document.getElementById('mint-to-account').value.trim();
            const toAccountCustom = document.getElementById('mint-to-custom').value.trim();
            const amount = document.getElementById('mint-amount').value;
            const denom = document.getElementById('mint-denom').value;
            
            console.log('Ë°®ÂçïÊï∞ÊçÆ:', { fromAccount, toAccountSelect, toAccountCustom, amount, denom });
            
            // Á°ÆÂÆöÊé•Êî∂Âú∞ÂùÄÔºö‰ºòÂÖà‰ΩøÁî®ÈÄâÊã©ÁöÑË¥¶Êà∑ÔºåÂÖ∂Ê¨°‰ΩøÁî®Ëá™ÂÆö‰πâËæìÂÖ•
            let toAccount = toAccountSelect || toAccountCustom;
            
            if (!fromAccount || !toAccount || !amount || !denom) {
                showMintStatus('ËØ∑Â°´ÂÜôÊâÄÊúâÂøÖÂ°´Â≠óÊÆµ', 'error');
                return;
            }
            
            if (!toAccount.startsWith('feic1')) {
                showMintStatus('Êé•Êî∂Âú∞ÂùÄÊ†ºÂºè‰∏çÊ≠£Á°ÆÔºåÂ∫î‰ª•feic1ÂºÄÂ§¥', 'error');
                return;
            }
            
            // Ëé∑ÂèñÈÄâ‰∏≠Ë¥¶Êà∑ÁöÑÂêçÁß∞Áî®‰∫éÊòæÁ§∫
            let toAccountDisplayName = toAccount;
            if (toAccountSelect) {
                const selectedOption = document.querySelector(`#mint-to-account option[value="${toAccountSelect}"]`);
                if (selectedOption) {
                    toAccountDisplayName = selectedOption.getAttribute('data-name') || selectedOption.textContent;
                }
            }
            
            // Á¶ÅÁî®Â¢ûÂèëÊåâÈíÆ
            const mintBtn = document.getElementById('mint-btn');
            mintBtn.disabled = true;
            mintBtn.textContent = 'üî® Â¢ûÂèë‰∏≠...';
            
            showMintStatus(`Ê≠£Âú®Â§ÑÁêÜ ${amount} ${denom} ÁöÑÂ¢ûÂèëÊìç‰Ωú...`, 'loading');
            
            try {
                addLog('info', `üî® Ê≠£Âú®Â¢ûÂèë ${amount} ${denom} Âà∞ ${toAccountDisplayName} (${toAccount})`);
                
                // Ê≥®ÊÑèÔºöÁúüÂÆûÁöÑÂå∫ÂùóÈìæ‰∏≠ÔºåÂ¢ûÂèëÈÄöÂ∏∏ÈúÄË¶ÅÁâπÊÆäÊùÉÈôêÊàñÊ≤ªÁêÜÊèêÊ°à
                // ËøôÈáåÊàë‰ª¨‰ΩøÁî®ËΩ¨Ë¥¶ÁöÑÊñπÂºèÊ®°ÊãüÂ¢ûÂèëÔºà‰ªéÁÆ°ÁêÜÂëòË¥¶Êà∑ËΩ¨Ë¥¶Ôºâ
                const response = await fetch('http://localhost:3001/token/mint', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        fromAccount: fromAccount,
                        toAccount: toAccount,
                        amount: amount,
                        denom: denom
                    })
                });
                
                const result = await response.json();
                if (result.success) {
                    addSuccessLog(`üéâ Ê®°ÊãüÂ¢ûÂèëÊàêÂäü! ${amount} ${denom} Â∑≤‰ªé ${fromAccount} ËΩ¨Ë¥¶Âà∞ ${toAccountDisplayName}`);
                    addLog('info', `üìä Ê≥®ÊÑèÔºöËøôÊòØÊ®°ÊãüÂ¢ûÂèëÔºàËΩ¨Ë¥¶ÔºâÔºåÊÄª‰æõÂ∫îÈáè‰∏çÂèò„ÄÇÁúüÂÆûÂ¢ûÂèëÈúÄË¶ÅmintÊùÉÈôê`);
                    showMintStatus(`üéâ Ê®°ÊãüÂ¢ûÂèëÊàêÂäüÔºÅ${amount} ${denom} Â∑≤ËΩ¨Ë¥¶Âà∞ ${toAccountDisplayName}`, 'success');
                    
                    // Ê∏ÖÁ©∫Ë°®Âçï
                    document.getElementById('mint-to-account').value = '';
                    document.getElementById('mint-to-custom').value = '';
                    document.getElementById('mint-amount').value = '';
                    
                    // ÈáçÊñ∞ÂêØÁî®ÊåâÈíÆ
                    mintBtn.disabled = false;
                    mintBtn.textContent = 'üî® ÊâßË°åÂ¢ûÂèë';
                    
                    // Âà∑Êñ∞ÁªüËÆ°Êï∞ÊçÆ
                    setTimeout(() => {
                        refreshTokenStats();
                        refreshWalletList();
                        hideMintTokenForm();
                    }, 3000);
                } else {
                    addLog('error', `‚ùå TokenÂ¢ûÂèëÂ§±Ë¥•: ${result.error}`);
                    showMintStatus(`‚ùå Â¢ûÂèëÂ§±Ë¥•: ${result.error}`, 'error');
                    // ÈáçÊñ∞ÂêØÁî®ÊåâÈíÆ
                    mintBtn.disabled = false;
                    mintBtn.textContent = 'üî® ÊâßË°åÂ¢ûÂèë';
                }
            } catch (error) {
                addLog('error', `‚ùå TokenÂ¢ûÂèëÂ§±Ë¥•: ${error.message}`);
                showMintStatus(`‚ùå ÁΩëÁªúÈîôËØØ: ${error.message}`, 'error');
                // ÈáçÊñ∞ÂêØÁî®ÊåâÈíÆ
                mintBtn.disabled = false;
                mintBtn.textContent = 'üî® ÊâßË°åÂ¢ûÂèë';
            }
        }
        
        // Âà∑Êñ∞TokenÁªüËÆ°Êï∞ÊçÆ
        async function refreshTokenStats() {
            try {
                addLog('info', 'üîÑ Ê≠£Âú®Âà∑Êñ∞TokenÁªüËÆ°Êï∞ÊçÆ...');
                
                // 1. Ëé∑ÂèñÈìæ‰∏äÁúüÂÆûÊÄª‰æõÂ∫îÈáè
                let chainTokenTotal = 0;
                let chainStakeTotal = 0;
                
                try {
                    const totalSupplyResponse = await fetch('http://localhost:1317/cosmos/bank/v1beta1/supply');
                    const totalSupplyData = await totalSupplyResponse.json();
                    
                    if (totalSupplyData.supply) {
                        const tokenSupply = totalSupplyData.supply.find(s => s.denom === 'token');
                        const stakeSupply = totalSupplyData.supply.find(s => s.denom === 'stake');
                        
                        chainTokenTotal = tokenSupply ? parseInt(tokenSupply.amount) : 0;
                        chainStakeTotal = stakeSupply ? parseInt(stakeSupply.amount) : 0;
                    }
                } catch (error) {
                    console.error('Ëé∑ÂèñÈìæ‰∏äÊÄª‰æõÂ∫îÈáèÂ§±Ë¥•:', error);
                }
                
                // 2. ËÆ°ÁÆóÈí±ÂåÖ‰∏≠ÁöÑÊåÅÊúâËÄÖÊï∞ÈáèÔºàÁî®‰∫éÁªüËÆ°ÊåÅÊúâËÄÖÔºâ
                let tokenHolders = 0;
                let stakeHolders = 0;
                let walletTokenTotal = 0;
                let walletStakeTotal = 0;
                
                for (const wallet of allWallets) {
                    try {
                        const balance = await getBalance(wallet.address);
                        
                        const tokenBalance = balance.find(b => b.denom === 'token');
                        const stakeBalance = balance.find(b => b.denom === 'stake');
                        
                        if (tokenBalance && parseInt(tokenBalance.amount) > 0) {
                            walletTokenTotal += parseInt(tokenBalance.amount);
                            tokenHolders++;
                        }
                        
                        if (stakeBalance && parseInt(stakeBalance.amount) > 0) {
                            walletStakeTotal += parseInt(stakeBalance.amount);
                            stakeHolders++;
                        }
                    } catch (error) {
                        console.error(`Ëé∑Âèñ${wallet.name}‰ΩôÈ¢ùÂ§±Ë¥•:`, error);
                    }
                }
                
                // 3. Êõ¥Êñ∞ÁªüËÆ°ÊòæÁ§∫Ôºà‰ΩøÁî®Èìæ‰∏äÁúüÂÆûÊÄªÈáèÔºâ
                document.getElementById('token-total-supply').textContent = `${chainTokenTotal.toLocaleString()} token / ${chainStakeTotal.toLocaleString()} stake`;
                document.getElementById('token-circulation').textContent = `${chainTokenTotal.toLocaleString()} token / ${chainStakeTotal.toLocaleString()} stake`;
                document.getElementById('token-holders').textContent = `Token: ${tokenHolders}+ / Stake: ${stakeHolders}+ (Èí±ÂåÖÂÜÖ)`;
                
                // 4. Êõ¥Êñ∞ÂÖ®Â±ÄÁªüËÆ°
                tokenStats = {
                    totalSupply: { token: chainTokenTotal, stake: chainStakeTotal },
                    circulation: { token: chainTokenTotal, stake: chainStakeTotal },
                    holders: { token: tokenHolders, stake: stakeHolders }
                };
                
                addLog('info', `‚úÖ TokenÁªüËÆ°Â∑≤Êõ¥Êñ∞ - Èìæ‰∏äÊÄªÈáè Token: ${chainTokenTotal.toLocaleString()}, Stake: ${chainStakeTotal.toLocaleString()}`);
                addLog('info', `üìä Èí±ÂåÖÂÜÖÁªüËÆ° - Token: ${walletTokenTotal.toLocaleString()}, Stake: ${walletStakeTotal.toLocaleString()}`);
                
            } catch (error) {
                addLog('error', `‚ùå Âà∑Êñ∞TokenÁªüËÆ°Â§±Ë¥•: ${error.message}`);
            }
        }
        
        // ÊòæÁ§∫TokenÂàÜÂ∏É
        function showTokenDistribution() {
            document.getElementById('token-distribution-section').style.display = 'block';
            refreshTokenDistribution();
        }
        
        // ÈöêËóèTokenÂàÜÂ∏É
        function hideTokenDistribution() {
            document.getElementById('token-distribution-section').style.display = 'none';
        }
        
        // ÊòæÁ§∫ÁúüÂÆûÂ¢ûÂèëËØ¥Êòé
        function showRealMintInfo() {
            document.getElementById('real-mint-info').style.display = 'block';
        }
        
        // ÈöêËóèÁúüÂÆûÂ¢ûÂèëËØ¥Êòé
        function hideRealMintInfo() {
            document.getElementById('real-mint-info').style.display = 'none';
        }
        
        // ÊòæÁ§∫ÁúüÂÆûÂ¢ûÂèëË°®Âçï
        async function showRealMintForm() {
            hideRealMintTokenForm();
            document.getElementById('real-mint-token-form').style.display = 'block';
            
            // Â¶ÇÊûúÈí±ÂåÖÂàóË°®‰∏∫Á©∫ÔºåÂÖàÂà∑Êñ∞Èí±ÂåÖÂàóË°®
            if (allWallets.length === 0) {
                addLog('info', 'üîÑ Ê≠£Âú®Âä†ËΩΩÈí±ÂåÖÂàóË°®...');
                await refreshWalletList();
            }
            
            updateRealMintAccountOptions();
            setupRealMintFormListeners();
        }
        
        // ÈöêËóèÁúüÂÆûÂ¢ûÂèëË°®Âçï
        function hideRealMintTokenForm() {
            document.getElementById('real-mint-token-form').style.display = 'none';
            
            // ÈáçÁΩÆÊåâÈíÆÁä∂ÊÄÅ
            const realMintBtn = document.getElementById('real-mint-btn');
            if (realMintBtn) {
                realMintBtn.disabled = false;
                realMintBtn.textContent = 'üíé Êèê‰∫§Â¢ûÂèëÊèêÊ°à';
            }
        }
        
        // Êõ¥Êñ∞ÁúüÂÆûÂ¢ûÂèëË¥¶Êà∑ÈÄâÈ°π
        function updateRealMintAccountOptions() {
            const fromSelect = document.getElementById('real-mint-from-account');
            const toSelect = document.getElementById('real-mint-to-account');
            
            if (allWallets.length > 0) {
                // Êõ¥Êñ∞ÊèêÊ°àÊèê‰∫§ËÄÖÈÄâÈ°π
                if (fromSelect) {
                    fromSelect.innerHTML = '<option value="">ÈÄâÊã©ÊèêÊ°àÊèê‰∫§ËÄÖ</option>';
                    allWallets.forEach(wallet => {
                        fromSelect.innerHTML += `<option value="${wallet.name}">${wallet.name}</option>`;
                    });
                }
                
                // Êõ¥Êñ∞Êé•Êî∂ÊñπË¥¶Êà∑ÈÄâÈ°π
                if (toSelect) {
                    toSelect.innerHTML = '<option value="">ÈÄâÊã©Êé•Êî∂Ë¥¶Êà∑</option>';
                    allWallets.forEach(wallet => {
                        toSelect.innerHTML += `<option value="${wallet.address}" data-name="${wallet.name}">${wallet.name} (${wallet.address})</option>`;
                    });
                }
                
                addLog('info', `‚úÖ Â∑≤Âä†ËΩΩ ${allWallets.length} ‰∏™Èí±ÂåÖÂà∞ÁúüÂÆûÂ¢ûÂèëË°®Âçï`);
            } else {
                // Èí±ÂåÖÂàóË°®‰∏∫Á©∫Êó∂ÁöÑÂ§ÑÁêÜ
                if (fromSelect) {
                    fromSelect.innerHTML = '<option value="">Ê≠£Âú®Âä†ËΩΩÈí±ÂåÖ...</option>';
                }
                if (toSelect) {
                    toSelect.innerHTML = '<option value="">Ê≠£Âú®Âä†ËΩΩÈí±ÂåÖ...</option>';
                }
                addLog('warning', '‚ö†Ô∏è Èí±ÂåÖÂàóË°®‰∏∫Á©∫ÔºåËØ∑Ê£ÄÊü•ËäÇÁÇπËøûÊé•Áä∂ÊÄÅ');
            }
        }
        
        // ËÆæÁΩÆÁúüÂÆûÂ¢ûÂèëË°®ÂçïÁõëÂê¨Âô®
        function setupRealMintFormListeners() {
            const toAccountSelect = document.getElementById('real-mint-to-account');
            const toAccountCustom = document.getElementById('real-mint-to-custom');
            
            // ÂΩìÈÄâÊã©‰∏ãÊãâÊ°ÜÊó∂ÔºåÊ∏ÖÁ©∫Ëá™ÂÆö‰πâËæìÂÖ•Ê°Ü
            toAccountSelect.addEventListener('change', function() {
                if (this.value) {
                    toAccountCustom.value = '';
                }
            });
            
            // ÂΩìÂú®Ëá™ÂÆö‰πâËæìÂÖ•Ê°ÜËæìÂÖ•Êó∂ÔºåÊ∏ÖÁ©∫‰∏ãÊãâÊ°ÜÈÄâÊã©
            toAccountCustom.addEventListener('input', function() {
                if (this.value.trim()) {
                    toAccountSelect.value = '';
                }
            });
        }
        
        // ÊòæÁ§∫ÁúüÂÆûÂ¢ûÂèëÁä∂ÊÄÅ‰ø°ÊÅØ
        function showRealMintStatus(message, type = 'info') {
            const statusDiv = document.getElementById('real-mint-status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
            
            if (type !== 'loading') {
                setTimeout(() => {
                    statusDiv.innerHTML = '';
                }, 10000); // ÁúüÂÆûÂ¢ûÂèëÊèêÊ°àÁªìÊûúÊòæÁ§∫Êõ¥ÈïøÊó∂Èó¥
            }
        }
        
        // ÊâßË°åÁúüÂÆûTokenÂ¢ûÂèë
        async function realMintTokens() {
            console.log('realMintTokensÂáΩÊï∞Ë¢´Ë∞ÉÁî®');
            addLog('info', 'üíé ÂºÄÂßãÊâßË°åÁúüÂÆûTokenÂ¢ûÂèëÊèêÊ°à...');
            
            const fromAccount = document.getElementById('real-mint-from-account').value;
            const toAccountSelect = document.getElementById('real-mint-to-account').value.trim();
            const toAccountCustom = document.getElementById('real-mint-to-custom').value.trim();
            const amount = document.getElementById('real-mint-amount').value;
            const denom = document.getElementById('real-mint-denom').value;
            const title = document.getElementById('real-mint-title').value.trim();
            const description = document.getElementById('real-mint-description').value.trim();
            
            console.log('ÁúüÂÆûÂ¢ûÂèëË°®ÂçïÊï∞ÊçÆ:', { fromAccount, toAccountSelect, toAccountCustom, amount, denom, title, description });
            
            // Á°ÆÂÆöÊé•Êî∂Âú∞ÂùÄÔºö‰ºòÂÖà‰ΩøÁî®ÈÄâÊã©ÁöÑË¥¶Êà∑ÔºåÂÖ∂Ê¨°‰ΩøÁî®Ëá™ÂÆö‰πâËæìÂÖ•
            let toAccount = toAccountSelect || toAccountCustom;
            
            if (!fromAccount || !toAccount || !amount || !denom) {
                showRealMintStatus('ËØ∑Â°´ÂÜôÊâÄÊúâÂøÖÂ°´Â≠óÊÆµ', 'error');
                return;
            }
            
            if (!toAccount.startsWith('feic1')) {
                showRealMintStatus('Êé•Êî∂Âú∞ÂùÄÊ†ºÂºè‰∏çÊ≠£Á°ÆÔºåÂ∫î‰ª•feic1ÂºÄÂ§¥', 'error');
                return;
            }
            
            // Ëé∑ÂèñÈÄâ‰∏≠Ë¥¶Êà∑ÁöÑÂêçÁß∞Áî®‰∫éÊòæÁ§∫
            let toAccountDisplayName = toAccount;
            if (toAccountSelect) {
                const selectedOption = document.querySelector(`#real-mint-to-account option[value="${toAccountSelect}"]`);
                if (selectedOption) {
                    toAccountDisplayName = selectedOption.getAttribute('data-name') || selectedOption.textContent;
                }
            }
            
            // Á¶ÅÁî®Â¢ûÂèëÊåâÈíÆ
            const realMintBtn = document.getElementById('real-mint-btn');
            realMintBtn.disabled = true;
            realMintBtn.textContent = 'üíé Êèê‰∫§‰∏≠...';
            
            showRealMintStatus(`Ê≠£Âú®ÂàõÂª∫Ê≤ªÁêÜÊèêÊ°àÔºöÂ¢ûÂèë ${amount} ${denom}...`, 'loading');
            
            try {
                addLog('info', `üíé Ê≠£Âú®ÂàõÂª∫Ê≤ªÁêÜÊèêÊ°àÔºöÂ¢ûÂèë ${amount} ${denom} Âà∞ ${toAccountDisplayName} (${toAccount})`);
                
                const response = await fetch('http://localhost:3001/token/real-mint', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        fromAccount: fromAccount,
                        toAccount: toAccount,
                        amount: amount,
                        denom: denom,
                        title: title || `Â¢ûÂèë ${amount} ${denom}`,
                        description: description || `ÊèêÊ°àÂ¢ûÂèë ${amount} ${denom} ‰ª£Â∏ÅÂà∞ ${toAccount}`
                    })
                });
                
                const result = await response.json();
                if (result.success) {
                    addSuccessLog(`üéâ Ê≤ªÁêÜÊèêÊ°àÂ∑≤Êèê‰∫§ÔºÅÂ¢ûÂèë ${amount} ${denom} ÁöÑÊèêÊ°àÂ∑≤ÂàõÂª∫`);
                    addLog('info', `üìä Ê≥®ÊÑèÔºöËøôÊòØÁúüÂÆûÁöÑÊ≤ªÁêÜÊèêÊ°àÔºåÈúÄË¶ÅÁΩëÁªúÊäïÁ•®ÈÄöËøáÊâç‰ºöÊâßË°åÂ¢ûÂèë`);
                    showRealMintStatus(`üéâ Ê≤ªÁêÜÊèêÊ°àÂ∑≤Êèê‰∫§ÔºÅÈúÄË¶ÅÁΩëÁªúÊäïÁ•®ÈÄöËøá`, 'success');
                    
                    // Ê∏ÖÁ©∫Ë°®Âçï
                    document.getElementById('real-mint-to-account').value = '';
                    document.getElementById('real-mint-to-custom').value = '';
                    document.getElementById('real-mint-amount').value = '';
                    document.getElementById('real-mint-title').value = '';
                    document.getElementById('real-mint-description').value = '';
                    
                    // ÈáçÊñ∞ÂêØÁî®ÊåâÈíÆ
                    realMintBtn.disabled = false;
                    realMintBtn.textContent = 'üíé Êèê‰∫§Â¢ûÂèëÊèêÊ°à';
                    
                    // 5ÁßíÂêéÂÖ≥Èó≠Ë°®Âçï
                    setTimeout(() => {
                        hideRealMintTokenForm();
                    }, 5000);
                } else {
                    addLog('error', `‚ùå Ê≤ªÁêÜÊèêÊ°àÊèê‰∫§Â§±Ë¥•: ${result.error}`);
                    showRealMintStatus(`‚ùå ÊèêÊ°àÊèê‰∫§Â§±Ë¥•: ${result.error}`, 'error');
                    // ÈáçÊñ∞ÂêØÁî®ÊåâÈíÆ
                    realMintBtn.disabled = false;
                    realMintBtn.textContent = 'üíé Êèê‰∫§Â¢ûÂèëÊèêÊ°à';
                }
            } catch (error) {
                addLog('error', `‚ùå Ê≤ªÁêÜÊèêÊ°àÊèê‰∫§Â§±Ë¥•: ${error.message}`);
                showRealMintStatus(`‚ùå ÁΩëÁªúÈîôËØØ: ${error.message}`, 'error');
                // ÈáçÊñ∞ÂêØÁî®ÊåâÈíÆ
                realMintBtn.disabled = false;
                realMintBtn.textContent = 'üíé Êèê‰∫§Â¢ûÂèëÊèêÊ°à';
            }
        }
        
        // Âà∑Êñ∞TokenÂàÜÂ∏ÉÊï∞ÊçÆ
        async function refreshTokenDistribution() {
            const tokenType = document.getElementById('distribution-token-type').value;
            const container = document.getElementById('token-distribution-list');
            
            try {
                addLog('info', `üìä Ê≠£Âú®Ëé∑Âèñ ${tokenType} ÂàÜÂ∏ÉÊï∞ÊçÆ...`);
                container.innerHTML = 'Âä†ËΩΩ‰∏≠...';
                
                let distributions = [];
                let totalAmount = 0;
                
                // Ëé∑ÂèñÊâÄÊúâÈí±ÂåÖÁöÑÊåáÂÆö‰ª£Â∏Å‰ΩôÈ¢ù
                for (const wallet of allWallets) {
                    try {
                        const balance = await getBalance(wallet.address);
                        const tokenBalance = balance.find(b => b.denom === tokenType);
                        
                        if (tokenBalance && parseInt(tokenBalance.amount) > 0) {
                            const amount = parseInt(tokenBalance.amount);
                            distributions.push({
                                name: wallet.name,
                                address: wallet.address,
                                amount: amount
                            });
                            totalAmount += amount;
                        }
                    } catch (error) {
                        console.error(`Ëé∑Âèñ${wallet.name}‰ΩôÈ¢ùÂ§±Ë¥•:`, error);
                    }
                }
                
                // Êåâ‰ΩôÈ¢ùÊéíÂ∫è
                distributions.sort((a, b) => b.amount - a.amount);
                
                // ÁîüÊàêÂàÜÂ∏ÉË°®Ê†º
                if (distributions.length === 0) {
                    container.innerHTML = '<div style="text-align: center; padding: 20px; color: #666;">ÊöÇÊó†ÊåÅÊúâËÄÖ</div>';
                } else {
                    let tableHtml = `
                        <table class="token-distribution-table">
                            <thead>
                                <tr>
                                    <th>ÊéíÂêç</th>
                                    <th>Èí±ÂåÖÂêçÁß∞</th>
                                    <th>Âú∞ÂùÄ</th>
                                    <th>ÊåÅÊúâÈáè</th>
                                    <th>Âç†ÊØî</th>
                                </tr>
                            </thead>
                            <tbody>
                    `;
                    
                    distributions.forEach((dist, index) => {
                        const percentage = totalAmount > 0 ? ((dist.amount / totalAmount) * 100).toFixed(2) : '0';
                        tableHtml += `
                            <tr>
                                <td>${index + 1}</td>
                                <td><strong>${dist.name}</strong></td>
                                <td class="address-cell" title="${dist.address}">${dist.address}</td>
                                <td class="amount-cell">${dist.amount.toLocaleString()} ${tokenType}</td>
                                <td class="percentage-cell">${percentage}%</td>
                            </tr>
                        `;
                    });
                    
                    tableHtml += `
                            </tbody>
                        </table>
                        <div style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 6px;">
                            <strong>ÊÄªËÆ°:</strong> ${totalAmount.toLocaleString()} ${tokenType} 
                            <span style="margin-left: 20px;"><strong>ÊåÅÊúâËÄÖÊï∞Èáè:</strong> ${distributions.length}</span>
                        </div>
                    `;
                    
                    container.innerHTML = tableHtml;
                }
                
                addLog('info', `üìä ${tokenType} ÂàÜÂ∏ÉÁªüËÆ°ÂÆåÊàê - ÊÄªÈáè: ${totalAmount.toLocaleString()}, ÊåÅÊúâËÄÖ: ${distributions.length}`);
                
            } catch (error) {
                addLog('error', `‚ùå Ëé∑ÂèñTokenÂàÜÂ∏ÉÂ§±Ë¥•: ${error.message}`);
                container.innerHTML = '<div style="color: red; text-align: center; padding: 20px;">Âä†ËΩΩÂ§±Ë¥•</div>';
            }
        }

        // ===========================================
        // Èí±ÂåÖÁÆ°ÁêÜÂäüËÉΩ
        // ===========================================

        // ÊòæÁ§∫ÂàõÂª∫Èí±ÂåÖË°®Âçï
        function showCreateWallet() {
            hideWalletForms();
            document.getElementById('create-wallet-form').style.display = 'block';
        }

        // ÊòæÁ§∫ÂØºÂÖ•Èí±ÂåÖË°®Âçï
        function showImportWallet() {
            hideWalletForms();
            document.getElementById('import-wallet-form').style.display = 'block';
        }

        // ÈöêËóèÊâÄÊúâÈí±ÂåÖË°®Âçï
        function hideWalletForms() {
            document.getElementById('create-wallet-form').style.display = 'none';
            document.getElementById('import-wallet-form').style.display = 'none';
        }

        // ÂàõÂª∫Êñ∞Èí±ÂåÖ
        async function createWallet() {
            const name = document.getElementById('new-wallet-name').value.trim();
            if (!name) {
                showStatus('ËØ∑ËæìÂÖ•Èí±ÂåÖÂêçÁß∞', 'error');
                return;
            }

            try {
                addLog('info', `üîë Ê≠£Âú®ÂàõÂª∫Èí±ÂåÖ: ${name}`);
                const response = await fetch('http://localhost:3001/wallet/create', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name: name })
                });

                const result = await response.json();
                if (result.success) {
                    addSuccessLog(`üéâ Èí±ÂåÖ "${name}" ÂàõÂª∫ÊàêÂäü!`);
                    
                    // ÊòæÁ§∫Âä©ËÆ∞ËØç
                    if (result.output && result.output.mnemonic) {
                        const mnemonicDiv = document.createElement('div');
                        mnemonicDiv.className = 'mnemonic-display';
                        mnemonicDiv.innerHTML = `
                            <div class="mnemonic-warning">‚ö†Ô∏è ËØ∑ÂÆâÂÖ®‰øùÂ≠ò‰ª•‰∏ãÂä©ËÆ∞ËØçÔºåËøôÊòØÊÅ¢Â§çÈí±ÂåÖÁöÑÂîØ‰∏ÄÊñπÂºèÔºÅ</div>
                            <strong>Âä©ËÆ∞ËØç:</strong><br>${result.output.mnemonic}
                        `;
                        document.getElementById('create-wallet-form').appendChild(mnemonicDiv);
                    }
                    
                    document.getElementById('new-wallet-name').value = '';
                    setTimeout(() => {
                        hideWalletForms();
                        refreshWalletList();
                    }, 5000);
                } else {
                    addLog('error', `‚ùå ÂàõÂª∫Èí±ÂåÖÂ§±Ë¥•: ${result.error}`);
                }
            } catch (error) {
                addLog('error', `‚ùå ÂàõÂª∫Èí±ÂåÖÂ§±Ë¥•: ${error.message}`);
            }
        }

        // ÂØºÂÖ•Èí±ÂåÖ
        async function importWallet() {
            const name = document.getElementById('import-wallet-name').value.trim();
            const mnemonic = document.getElementById('wallet-mnemonic').value.trim();
            
            if (!name || !mnemonic) {
                showStatus('ËØ∑ËæìÂÖ•Èí±ÂåÖÂêçÁß∞ÂíåÂä©ËÆ∞ËØç', 'error');
                return;
            }

            try {
                addLog('info', `üì• Ê≠£Âú®ÂØºÂÖ•Èí±ÂåÖ: ${name}`);
                const response = await fetch('http://localhost:3001/wallet/import', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name: name, mnemonic: mnemonic })
                });

                const result = await response.json();
                if (result.success) {
                    addSuccessLog(`üéâ Èí±ÂåÖ "${name}" ÂØºÂÖ•ÊàêÂäü!`);
                    document.getElementById('import-wallet-name').value = '';
                    document.getElementById('wallet-mnemonic').value = '';
                    hideWalletForms();
                    refreshWalletList();
                } else {
                    addLog('error', `‚ùå ÂØºÂÖ•Èí±ÂåÖÂ§±Ë¥•: ${result.error}`);
                }
            } catch (error) {
                addLog('error', `‚ùå ÂØºÂÖ•Èí±ÂåÖÂ§±Ë¥•: ${error.message}`);
            }
        }

        // Âà∑Êñ∞Èí±ÂåÖÂàóË°®
        async function refreshWalletList() {
            try {
                addLog('info', 'üîÑ Âà∑Êñ∞Èí±ÂåÖÂàóË°®...');
                const response = await fetch('http://localhost:3001/wallets/list');
                const result = await response.json();
                
                if (result.success) {
                    allWallets = result.output;
                    displayWallets();
                    updateAccountSelects();
                    addLog('info', `üìã Ëé∑ÂèñÂà∞ ${allWallets.length} ‰∏™Èí±ÂåÖ`);
                } else {
                    addLog('error', `‚ùå Ëé∑ÂèñÈí±ÂåÖÂàóË°®Â§±Ë¥•: ${result.error}`);
                }
            } catch (error) {
                addLog('error', `‚ùå Ëé∑ÂèñÈí±ÂåÖÂàóË°®Â§±Ë¥•: ${error.message}`);
            }
        }

        // ÊòæÁ§∫Èí±ÂåÖÂàóË°®ÔºàÊ®™ÂêëÁ¥ßÂáëÊ®°ÂºèÔºâ
        async function displayWallets() {
            const container = document.getElementById('wallets-container');
            
            if (allWallets.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 20px; color: #666;">ÊöÇÊó†Èí±ÂåÖÔºåËØ∑ÂàõÂª∫ÊàñÂØºÂÖ•Èí±ÂåÖ</div>';
                return;
            }

            // ÂÖàÊòæÁ§∫Èí±ÂåÖÁÆÄ‰ªã‰ø°ÊÅØÔºåÁÑ∂ÂêéÂºÇÊ≠•Âä†ËΩΩ‰ΩôÈ¢ù
            let html = '';
            for (const wallet of allWallets) {
                html += `
                    <div class="wallet-item-compact" id="wallet-${wallet.name}">
                        <div class="wallet-compact-name">üîë ${wallet.name}</div>
                        <div class="wallet-compact-balance" id="balance-${wallet.name}">Âä†ËΩΩ‰∏≠...</div>
                        <div class="wallet-compact-actions-mini">
                            <button class="btn-mini" onclick="sendTokensToWallet('${wallet.address}')" title="ÂèëÈÄÅ1000 token">üí∞</button>
                            <button class="btn-mini" onclick="sendStakeToWallet('${wallet.address}')" title="ÂèëÈÄÅ1000 stake">ü•©</button>
                            <button class="btn-mini" onclick="toggleWalletDetails('${wallet.name}')" title="Êü•ÁúãËØ¶ÊÉÖ">üëÅÔ∏è</button>
                        </div>
                        <div class="wallet-details" id="details-${wallet.name}">
                            <div><strong>ÂÆåÊï¥Âú∞ÂùÄ:</strong></div>
                            <div class="wallet-address">${wallet.address}</div>
                            <div style="margin-top: 8px; text-align: center;">
                                <button class="btn btn-small" onclick="sendTokensToWallet('${wallet.address}')">üí∞ ÂèëÈÄÅ‰ª£Â∏Å</button>
                            </div>
                        </div>
                    </div>
                `;
            }
            container.innerHTML = html;
            
            // ÂºÇÊ≠•Âä†ËΩΩÊØè‰∏™Èí±ÂåÖÁöÑ‰ΩôÈ¢ù
            for (const wallet of allWallets) {
                try {
                    const balance = await getBalance(wallet.address);
                    const balanceElement = document.getElementById(`balance-${wallet.name}`);
                    if (balanceElement && balance.length > 0) {
                        const balanceHtml = balance.map(b => 
                            `${parseInt(b.amount).toLocaleString()} ${b.denom}`
                        ).join('<br>');
                        balanceElement.innerHTML = balanceHtml;
                    } else if (balanceElement) {
                        balanceElement.innerHTML = '0';
                    }
                } catch (error) {
                    console.error(`Âä†ËΩΩ${wallet.name}‰ΩôÈ¢ùÂ§±Ë¥•:`, error);
                    const balanceElement = document.getElementById(`balance-${wallet.name}`);
                    if (balanceElement) {
                        balanceElement.innerHTML = 'Âä†ËΩΩÂ§±Ë¥•';
                    }
                }
            }
        }

        // ÂàáÊç¢Èí±ÂåÖËØ¶ÊÉÖÊòæÁ§∫
        function toggleWalletDetails(walletName) {
            const detailsElement = document.getElementById(`details-${walletName}`);
            const expandBtn = event.target;
            
            if (detailsElement.classList.contains('expanded')) {
                detailsElement.classList.remove('expanded');
                expandBtn.textContent = 'Â±ïÂºÄËØ¶ÊÉÖ';
            } else {
                // ÂÖ≥Èó≠ÂÖ∂‰ªñÂ∑≤Â±ïÂºÄÁöÑËØ¶ÊÉÖ
                document.querySelectorAll('.wallet-details.expanded').forEach(el => {
                    el.classList.remove('expanded');
                });
                document.querySelectorAll('.expand-btn').forEach(btn => {
                    btn.textContent = 'Â±ïÂºÄËØ¶ÊÉÖ';
                });
                
                // Â±ïÂºÄÂΩìÂâçÈí±ÂåÖËØ¶ÊÉÖ
                detailsElement.classList.add('expanded');
                expandBtn.textContent = 'Êî∂Ëµ∑ËØ¶ÊÉÖ';
            }
        }

        // ÂèëÈÄÅ‰ª£Â∏ÅÂà∞Êñ∞Èí±ÂåÖÔºàÊ∞¥ÈæôÂ§¥ÂäüËÉΩÔºâ
        async function sendTokensToWallet(address) {
            // Ëé∑ÂèñËß¶ÂèëÁöÑÊåâÈíÆÂÖÉÁ¥†ÔºàÂ¶ÇÊûúÊúâÁöÑËØùÔºâ
            const clickedButton = event ? event.target : null;
            const originalText = clickedButton ? clickedButton.textContent : '';
            
            try {
                // Á¶ÅÁî®ÊåâÈíÆÂπ∂ÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅ
                if (clickedButton) {
                    clickedButton.disabled = true;
                    clickedButton.textContent = 'üí∏';
                    clickedButton.style.opacity = '0.6';
                }
                
                addLog('info', `üí∞ Âêë ${address} ÂèëÈÄÅ 1000 token...`);
                const response = await fetch('http://localhost:3001/wallet/send-tokens', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        toAccount: address,
                        amount: '1000',
                        denom: 'token'
                    })
                });

                const result = await response.json();
                if (result.success) {
                    addSuccessLog(`üéâ ÊàêÂäüÂèëÈÄÅ 1000 token Âà∞Èí±ÂåÖ!`);
                    setTimeout(() => {
                        refreshWalletList();
                        refreshBalances();
                    }, 3000);
                } else {
                    addLog('error', `‚ùå ÂèëÈÄÅ token Â§±Ë¥•: ${result.error}`);
                }
            } catch (error) {
                addLog('error', `‚ùå ÂèëÈÄÅ token Â§±Ë¥•: ${error.message}`);
            } finally {
                // ÈáçÊñ∞ÂêØÁî®ÊåâÈíÆÂπ∂ÊÅ¢Â§çÂéüÂßãÊñáÊú¨
                if (clickedButton) {
                    setTimeout(() => {
                        clickedButton.disabled = false;
                        clickedButton.textContent = originalText;
                        clickedButton.style.opacity = '1';
                    }, 2000);
                }
            }
        }

        // ÂèëÈÄÅ stake Âà∞Èí±ÂåÖÔºàË¥®Êäº‰ª£Â∏ÅÊ∞¥ÈæôÂ§¥Ôºâ
        async function sendStakeToWallet(address) {
            // Ëé∑ÂèñËß¶ÂèëÁöÑÊåâÈíÆÂÖÉÁ¥†ÔºàÂ¶ÇÊûúÊúâÁöÑËØùÔºâ
            const clickedButton = event ? event.target : null;
            const originalText = clickedButton ? clickedButton.textContent : '';
            
            try {
                // Á¶ÅÁî®ÊåâÈíÆÂπ∂ÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅ
                if (clickedButton) {
                    clickedButton.disabled = true;
                    clickedButton.textContent = 'üîÑ';
                    clickedButton.style.opacity = '0.6';
                }
                
                addLog('info', `ü•© Âêë ${address} ÂèëÈÄÅ 1000 stake...`);
                const response = await fetch('http://localhost:3001/wallet/send-tokens', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        toAccount: address,
                        amount: '1000',
                        denom: 'stake'
                    })
                });

                const result = await response.json();
                if (result.success) {
                    addSuccessLog(`üéâ ÊàêÂäüÂèëÈÄÅ 1000 stake Âà∞Èí±ÂåÖ!`);
                    addLog('info', `üìù Áé∞Âú®ÂèØ‰ª•Áî®Ëøô‰∫õ stake ËøõË°åË¥®ÊäºÊàñÂàõÂª∫È™åËØÅËÄÖ`);
                    setTimeout(() => {
                        refreshWalletList();
                        refreshBalances();
                    }, 3000);
                } else {
                    addLog('error', `‚ùå ÂèëÈÄÅ stake Â§±Ë¥•: ${result.error}`);
                }
            } catch (error) {
                addLog('error', `‚ùå ÂèëÈÄÅ stake Â§±Ë¥•: ${error.message}`);
            } finally {
                // ÈáçÊñ∞ÂêØÁî®ÊåâÈíÆÂπ∂ÊÅ¢Â§çÂéüÂßãÊñáÊú¨
                if (clickedButton) {
                    setTimeout(() => {
                        clickedButton.disabled = false;
                        clickedButton.textContent = originalText;
                        clickedButton.style.opacity = '1';
                    }, 2000);
                }
            }
        }

        // ===========================================
        // Â•ñÂä±ÁÆ°ÁêÜÂäüËÉΩ
        // ===========================================
        
        let allRewards = [];
        
        // Âà∑Êñ∞Â•ñÂä±‰ø°ÊÅØ
        async function refreshRewards() {
            try {
                addLog('info', 'üîÑ Âà∑Êñ∞Â•ñÂä±‰ø°ÊÅØ...');
                
                allRewards = [];
                let totalAmount = 0;
                
                // Ëé∑ÂèñÊâÄÊúâÈí±ÂåÖÁöÑÂ•ñÂä±
                for (const wallet of allWallets) {
                    try {
                        const response = await fetch(`http://localhost:1317/cosmos/distribution/v1beta1/delegators/${wallet.address}/rewards`);
                        if (response.ok) {
                            const data = await response.json();
                            if (data.rewards && data.rewards.length > 0) {
                                for (const reward of data.rewards) {
                                    if (reward.reward && reward.reward.length > 0) {
                                        const rewardInfo = {
                                            delegatorAddress: wallet.address,
                                            delegatorName: wallet.name,
                                            validatorAddress: reward.validator_address,
                                            rewards: reward.reward
                                        };
                                        allRewards.push(rewardInfo);
                                        
                                        // ËÆ°ÁÆóÊÄªÂ•ñÂä± (Âè™ËÆ°ÁÆó stake)
                                        for (const r of reward.reward) {
                                            if (r.denom === 'stake') {
                                                totalAmount += parseFloat(r.amount);
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    } catch (error) {
                        console.error(`Ëé∑Âèñ ${wallet.name} Â•ñÂä±Â§±Ë¥•:`, error);
                    }
                }
                
                displayRewards();
                updateTotalRewards(totalAmount);
                addLog('info', `‚úÖ Â•ñÂä±‰ø°ÊÅØÂ∑≤Êõ¥Êñ∞ÔºåÊÄªËÆ°: ${(totalAmount/1000000).toFixed(8)} stake`);
                
            } catch (error) {
                addLog('error', `‚ùå Âà∑Êñ∞Â•ñÂä±Â§±Ë¥•: ${error.message}`);
            }
        }
        
        // ÊòæÁ§∫Â•ñÂä±ÂàóË°®
        function displayRewards() {
            const container = document.getElementById('rewards-list');
            
            if (allRewards.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 20px; color: #666;">ÊöÇÊó†Êú™ÊèêÂèñÂ•ñÂä±</div>';
                return;
            }
            
            let html = '';
            for (const rewardInfo of allRewards) {
                // ÊâæÂà∞ÂØπÂ∫îÁöÑÈ™åËØÅËÄÖÂêçÁß∞
                const validator = allValidators.find(v => v.operator_address === rewardInfo.validatorAddress);
                const validatorName = validator ? validator.description.moniker : 'Êú™Áü•È™åËØÅËÄÖ';
                
                // ËÆ°ÁÆóÂ•ñÂä±ÈáëÈ¢ù - ÊòæÁ§∫Êõ¥Â§öÂ∞èÊï∞‰Ωç
                const stakeReward = rewardInfo.rewards.find(r => r.denom === 'stake');
                const amount = stakeReward ? (parseFloat(stakeReward.amount) / 1000000).toFixed(8) : '0.00000000';
                
                if (parseFloat(amount) > 0.00000001) { // ÊòæÁ§∫Êõ¥Â∞èÁöÑÂ•ñÂä±
                    html += `
                        <div class="reward-item">
                            <div class="reward-info">
                                <div class="reward-amount">üí∞ ${amount} stake</div>
                                <div class="reward-validator">
                                    ÂßîÊâòËÄÖ: ${rewardInfo.delegatorName} ‚Üí È™åËØÅËÄÖ: ${validatorName}
                                </div>
                            </div>
                            <div class="reward-actions">
                                <button class="btn-reward" onclick="withdrawSpecificReward('${rewardInfo.delegatorAddress}', '${rewardInfo.validatorAddress}', '${rewardInfo.delegatorName}')">
                                    üí∏ ÊèêÂèñ
                                </button>
                            </div>
                        </div>
                    `;
                }
            }
            
            if (html === '') {
                html = '<div style="text-align: center; padding: 20px; color: #666;">ÊöÇÊó†Â•ñÂä±ÊàñÂ•ñÂä±ÈáëÈ¢ùÊûÅÂ∞è</div>';
            }
            
            container.innerHTML = html;
        }
        
        // Êõ¥Êñ∞ÊÄªÂ•ñÂä±ÊòæÁ§∫
        function updateTotalRewards(totalAmount) {
            const totalDisplay = document.getElementById('total-reward-amount');
            const withdrawBtn = document.getElementById('withdraw-all-btn');
            
            const totalStake = (totalAmount / 1000000).toFixed(8);
            totalDisplay.textContent = `${totalStake} stake`;
            
            // Â¶ÇÊûúÊ≤°ÊúâÂ•ñÂä±ÔºåÁ¶ÅÁî®ÊèêÂèñÊåâÈíÆ
            if (parseFloat(totalStake) < 0.00000001) {
                withdrawBtn.disabled = true;
                withdrawBtn.textContent = 'üí∞ ÊöÇÊó†Â•ñÂä±ÂèØÊèêÂèñ';
            } else {
                withdrawBtn.disabled = false;
                withdrawBtn.textContent = 'üí∞ ÊèêÂèñÊâÄÊúâÂ•ñÂä±';
            }
        }
        
        // ÊèêÂèñÁâπÂÆöÂ•ñÂä±
        async function withdrawSpecificReward(delegatorAddress, validatorAddress, delegatorName) {
            try {
                addLog('info', `üèÜ Ê≠£Âú®‰∏∫ ${delegatorName} ÊèêÂèñÂ•ñÂä±...`);
                
                const response = await fetch('http://localhost:3001/rewards/withdraw', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        delegatorAddress: delegatorAddress,
                        validatorAddress: validatorAddress,
                        fromAccount: delegatorName
                    })
                });
                
                const result = await response.json();
                if (result.success) {
                    addSuccessLog(`üéâ ${delegatorName} Â•ñÂä±ÊèêÂèñÊàêÂäü!`);
                    
                    // Á≠âÂæÖÂá†ÁßíÂêéÂà∑Êñ∞
                    setTimeout(() => {
                        refreshRewards();
                        refreshWalletList();
                    }, 3000);
                } else {
                    addLog('error', `‚ùå ÊèêÂèñÂ•ñÂä±Â§±Ë¥•: ${result.error}`);
                }
            } catch (error) {
                addLog('error', `‚ùå ÊèêÂèñÂ•ñÂä±Â§±Ë¥•: ${error.message}`);
            }
        }
        
        // ÊèêÂèñÊâÄÊúâÂ•ñÂä±
        async function withdrawAllRewards() {
            if (allRewards.length === 0) {
                addLog('warning', '‚ö†Ô∏è ÊöÇÊó†Â•ñÂä±ÂèØÊèêÂèñ');
                return;
            }
            
            addLog('info', 'üöÄ ÂºÄÂßãÊâπÈáèÊèêÂèñÊâÄÊúâÂ•ñÂä±...');
            
            let successCount = 0;
            let totalCount = 0;
            
            for (const rewardInfo of allRewards) {
                const stakeReward = rewardInfo.rewards.find(r => r.denom === 'stake');
                const amount = stakeReward ? parseFloat(stakeReward.amount) : 0;
                
                if (amount > 1000) { // Âè™ÊèêÂèñÊúâÊÑè‰πâÁöÑÂ•ñÂä±
                    totalCount++;
                    try {
                        const response = await fetch('http://localhost:3001/rewards/withdraw', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                delegatorAddress: rewardInfo.delegatorAddress,
                                validatorAddress: rewardInfo.validatorAddress,
                                fromAccount: rewardInfo.delegatorName
                            })
                        });
                        
                        const result = await response.json();
                        if (result.success) {
                            successCount++;
                            addLog('info', `‚úÖ ${rewardInfo.delegatorName} Â•ñÂä±ÊèêÂèñÊàêÂäü`);
                        } else {
                            addLog('error', `‚ùå ${rewardInfo.delegatorName} Â•ñÂä±ÊèêÂèñÂ§±Ë¥•: ${result.error}`);
                        }
                        
                        // ÈÅøÂÖçËØ∑Ê±ÇËøáÂø´
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        
                    } catch (error) {
                        addLog('error', `‚ùå ${rewardInfo.delegatorName} Â•ñÂä±ÊèêÂèñÂºÇÂ∏∏: ${error.message}`);
                    }
                }
            }
            
            addSuccessLog(`üéä ÊâπÈáèÊèêÂèñÂÆåÊàê! ÊàêÂäü: ${successCount}/${totalCount}`);
            
            // Á≠âÂæÖÂêéÂà∑Êñ∞
            setTimeout(() => {
                refreshRewards();
                refreshWalletList();
            }, 3000);
        }

        // ===========================================
        // È™åËØÅËÄÖÁÆ°ÁêÜÂäüËÉΩ
        // ===========================================

        // ÊòæÁ§∫ÂàõÂª∫È™åËØÅËÄÖË°®Âçï
        function showCreateValidator() {
            hideValidatorForms();
            document.getElementById('create-validator-form').style.display = 'block';
            updateValidatorAccountOptions();
        }

        // ÊòæÁ§∫ÂßîÊâòË°®Âçï
        function showDelegateForm() {
            hideValidatorForms();
            document.getElementById('delegate-form').style.display = 'block';
            updateValidatorAccountOptions();
            updateValidatorOptions();
        }

        // ÈöêËóèÊâÄÊúâÈ™åËØÅËÄÖË°®Âçï
        function hideValidatorForms() {
            document.getElementById('create-validator-form').style.display = 'none';
            document.getElementById('delegate-form').style.display = 'none';
        }

        // ÂàõÂª∫È™åËØÅËÄÖ
        async function createValidator() {
            const fromAccount = document.getElementById('validator-account').value;
            const amount = document.getElementById('validator-amount').value;
            const moniker = document.getElementById('validator-moniker').value;
            const commission = document.getElementById('validator-commission').value;

            if (!fromAccount || !amount || !moniker || !commission) {
                showStatus('ËØ∑Â°´ÂÜôÊâÄÊúâÂ≠óÊÆµ', 'error');
                return;
            }

            try {
                addLog('info', `‚ö° Ê≠£Âú®ÂàõÂª∫È™åËØÅËÄÖ: ${moniker}`);
                const response = await fetch('http://localhost:3001/validator/create', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        fromAccount: fromAccount,
                        amount: amount,
                        moniker: moniker,
                        commissionRate: (parseFloat(commission) / 100).toString(),
                        maxCommissionRate: '0.20',
                        maxCommissionChangeRate: '0.01'
                    })
                });

                const result = await response.json();
                if (result.success) {
                    addSuccessLog(`üéâ È™åËØÅËÄÖ "${moniker}" ÂàõÂª∫ÊàêÂäü!`);
                    hideValidatorForms();
                    setTimeout(() => {
                        refreshValidatorList();
                        refreshBalances();
                    }, 5000);
                } else {
                    addLog('error', `‚ùå ÂàõÂª∫È™åËØÅËÄÖÂ§±Ë¥•: ${result.error}`);
                }
            } catch (error) {
                addLog('error', `‚ùå ÂàõÂª∫È™åËØÅËÄÖÂ§±Ë¥•: ${error.message}`);
            }
        }

        // ÂßîÊâòË¥®Êäº
        async function delegateStake() {
            const fromAccount = document.getElementById('delegate-account').value;
            const validatorAddress = document.getElementById('delegate-validator').value;
            const amount = document.getElementById('delegate-amount').value;

            if (!fromAccount || !validatorAddress || !amount) {
                showStatus('ËØ∑Â°´ÂÜôÊâÄÊúâÂ≠óÊÆµ', 'error');
                return;
            }

            try {
                addLog('info', `ü§ù Ê≠£Âú®ÂßîÊâòË¥®Êäº ${amount} stake...`);
                const response = await fetch('http://localhost:3001/validator/delegate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        fromAccount: fromAccount,
                        validatorAddress: validatorAddress,
                        amount: amount
                    })
                });

                const result = await response.json();
                if (result.success) {
                    addSuccessLog(`üéâ ÂßîÊâòË¥®ÊäºÊàêÂäü!`);
                    hideValidatorForms();
                    setTimeout(() => {
                        refreshValidatorList();
                        refreshBalances();
                    }, 3000);
                } else {
                    addLog('error', `‚ùå ÂßîÊâòË¥®ÊäºÂ§±Ë¥•: ${result.error}`);
                }
            } catch (error) {
                addLog('error', `‚ùå ÂßîÊâòË¥®ÊäºÂ§±Ë¥•: ${error.message}`);
            }
        }

        // Âà∑Êñ∞È™åËØÅËÄÖÂàóË°®
        async function refreshValidatorList() {
            try {
                addLog('info', 'üîÑ Âà∑Êñ∞È™åËØÅËÄÖÂàóË°®...');
                const response = await fetch('http://localhost:3001/validators/list');
                const result = await response.json();
                
                if (result.success) {
                    allValidators = result.output.validators;
                    displayValidators();
                    addLog('info', `üèõÔ∏è Ëé∑ÂèñÂà∞ ${allValidators.length} ‰∏™È™åËØÅËÄÖ`);
                } else {
                    addLog('error', `‚ùå Ëé∑ÂèñÈ™åËØÅËÄÖÂàóË°®Â§±Ë¥•: ${result.error}`);
                }
            } catch (error) {
                addLog('error', `‚ùå Ëé∑ÂèñÈ™åËØÅËÄÖÂàóË°®Â§±Ë¥•: ${error.message}`);
            }
        }

        // ÊòæÁ§∫È™åËØÅËÄÖÂàóË°®
        function displayValidators() {
            const container = document.getElementById('validators-container');
            
            if (allValidators.length === 0) {
                container.innerHTML = '<p>ÊöÇÊó†È™åËØÅËÄÖ</p>';
                return;
            }

            let html = '';
            for (const validator of allValidators) {
                const status = validator.status === 'BOND_STATUS_BONDED' ? 'bonded' : 'unbonded';
                const statusText = validator.status === 'BOND_STATUS_BONDED' ? 'Â∑≤ÁªëÂÆö' : 'Êú™ÁªëÂÆö';
                const tokens = (parseInt(validator.tokens) / 1000000).toFixed(6);

                html += `
                    <div class="validator-item">
                        <h4>‚ö° ${validator.description.moniker}</h4>
                        <div class="validator-address">${validator.operator_address}</div>
                        <div><span class="validator-status ${status}">${statusText}</span></div>
                        <div class="validator-tokens">Ë¥®Êäº: ${tokens} stake</div>
                        <div>‰Ω£ÈáëÁéá: ${(parseFloat(validator.commission.commission_rates.rate) * 100).toFixed(2)}%</div>
                        <div>ÊòØÂê¶ÁõëÁ¶Å: ${validator.jailed ? 'ÊòØ' : 'Âê¶'}</div>
                    </div>
                `;
            }
            container.innerHTML = html;
        }

        // Êõ¥Êñ∞Ë¥¶Êà∑ÈÄâÊã©ÈÄâÈ°π
        function updateAccountSelects() {
            const selects = [
                'from-account', 
                'to-account', 
                'validator-account', 
                'delegate-account'
            ];
            
            selects.forEach(selectId => {
                const select = document.getElementById(selectId);
                if (select) {
                    select.innerHTML = '<option value="">ÈÄâÊã©Ë¥¶Êà∑</option>';
                    allWallets.forEach(wallet => {
                        select.innerHTML += `<option value="${wallet.name}">${wallet.name} (${wallet.address})</option>`;
                    });
                }
            });
        }

        // Êõ¥Êñ∞È™åËØÅËÄÖÈÄâÊã©ÈÄâÈ°π
        function updateValidatorOptions() {
            const select = document.getElementById('delegate-validator');
            if (select) {
                select.innerHTML = '<option value="">ÈÄâÊã©È™åËØÅËÄÖ</option>';
                allValidators.forEach(validator => {
                    select.innerHTML += `<option value="${validator.operator_address}">${validator.description.moniker}</option>`;
                });
            }
        }

        // Êõ¥Êñ∞È™åËØÅËÄÖË¥¶Êà∑ÈÄâÈ°π
        function updateValidatorAccountOptions() {
            const selects = ['validator-account', 'delegate-account'];
            selects.forEach(selectId => {
                const select = document.getElementById(selectId);
                if (select && allWallets.length > 0) {
                    select.innerHTML = '<option value="">ÈÄâÊã©Ë¥¶Êà∑</option>';
                    allWallets.forEach(wallet => {
                        select.innerHTML += `<option value="${wallet.name}">${wallet.name}</option>`;
                    });
                }
            });
        }

        // ===========================================
        // TabÈ°µÈù¢ÂàáÊç¢ÂäüËÉΩ
        // ===========================================
        
        // TabÂàáÊç¢ÂáΩÊï∞
        function switchTab(tabName) {
            // ÈöêËóèÊâÄÊúâtabÂÜÖÂÆπ
            const allTabPanels = document.querySelectorAll('.tab-panel');
            allTabPanels.forEach(panel => {
                panel.classList.remove('active');
            });
            
            // ÁßªÈô§ÊâÄÊúâtabÊåâÈíÆÁöÑactiveÁä∂ÊÄÅ
            const allTabButtons = document.querySelectorAll('.tab-button');
            allTabButtons.forEach(button => {
                button.classList.remove('active');
            });
            
            // ÊòæÁ§∫ÂØπÂ∫îÁöÑtabÂÜÖÂÆπ
            const targetTab = document.getElementById(`tab-${tabName}`);
            if (targetTab) {
                targetTab.classList.add('active');
            }
            
            // ÊøÄÊ¥ªÂØπÂ∫îÁöÑtabÊåâÈíÆ
            const targetButton = document.querySelector(`[onclick="switchTab('${tabName}')"]`);
            if (targetButton) {
                targetButton.classList.add('active');
            }
            
            // ËÆ∞ÂΩïÂΩìÂâçÊ¥ªË∑ÉÁöÑtab
            localStorage.setItem('activeTab', tabName);
            
            // Ê†πÊçÆtabÊâßË°åÁâπÂÆöÁöÑÂàùÂßãÂåñÊìç‰Ωú
            switch (tabName) {
                case 'blockchain':
                    // Âà∑Êñ∞ÊâÄÊúâÂå∫ÂùóÈìæÊï∞ÊçÆ
                    refreshAllBlockchainData();
                    break;
                case 'token':
                    // Âà∑Êñ∞TokenÁªüËÆ°
                    refreshTokenStats();
                    break;
                case 'wallet':
                    // Âà∑Êñ∞Èí±ÂåÖÂàóË°®Âíå‰ΩôÈ¢ù
                    refreshWalletList();
                    refreshBalances();
                    break;
                case 'validator':
                    // Âà∑Êñ∞È™åËØÅËÄÖÂàóË°®ÂíåÂ•ñÂä±
                    refreshValidatorList();
                    refreshRewards();
                    break;
            }
        }
        
        // È°µÈù¢Âä†ËΩΩÊó∂ÊÅ¢Â§ç‰∏äÊ¨°ÁöÑtabÁä∂ÊÄÅ
        function initializeTabs() {
            const savedTab = localStorage.getItem('activeTab') || 'blockchain';
            switchTab(savedTab);
        }
        
        // Â§ÑÁêÜË°®ÂçïÂèòÂåñ
        document.getElementById('from-account').addEventListener('change', function() {
            const toSelect = document.getElementById('to-account');
            const fromValue = this.value;
            
            // Ëá™Âä®ËÆæÁΩÆÁõÆÊ†áË¥¶Êà∑‰∏∫Âè¶‰∏Ä‰∏™Ë¥¶Êà∑
            if (allWallets.length >= 2) {
                const otherWallet = allWallets.find(w => w.name !== fromValue);
                if (otherWallet) {
                    toSelect.value = otherWallet.name;
                }
            }
        });
    </script>
</body>
</html>